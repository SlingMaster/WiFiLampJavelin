/*! (c) Developer Alex Dovby 
LampRemoteStats Release It is Created 21.04.2023 - 14:59:12,33 */
;var VERSION="21.04.2023";function getBrowser(){var a=navigator.userAgent;if(a.search(/MSIE/)>0){return"MSIE"}if(a.search(/Firefox/)>0){return"Firefox"}if(a.search(/Opera/)>0){return"Opera"}if(a.search(/Chrome/)>0){return"Chrome"}if(a.search(/Safari/)>0){return"Safari"}if(a.search(/Konqueror/)>0){return"Konqueror"}if(a.search(/Iceweasel/)>0){return"Iceweasel"}if(a.search(/SeaMonkey/)>0){return"SeaMonkey"}if(a.search(/Gecko/)>0){return"Gecko"}return"N/A"}function isPresent(a){return(a!==null&&a!==undefined&&a!=="")}function isDefined(a){return(a!==null&&a!==undefined)}function isUndefined(a){return(a===null||a===undefined)}function isObject(a){return"[object Object]"===Object.prototype.toString.call(a)}JSON.sort=function(a){if(Array.isArray(a)){return a.sort().map(JSON.sort)}else{if(isObject(a)){return Object.keys(a).sort().reduce(function(b,c){b[c]=JSON.sort(a[c]);return b},{})}}return a};function noCallback(a){}function getTimeFormatUTC(d){var b=Date.parse(d);var e="en-US";var a={year:"numeric",month:"long",day:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"};var c=isNaN(b)?"&#8226;":new Date(b).toLocaleString(e,a);return c}function getServerSensorData(a,b){$.ajax({type:"GET",url:a,dataType:"json"}).done(function(c){b(c)})}function uniqueKey(a){var c={};for(var b=0;b<a.length;b++){var d=a[b];c[d]=true}return Object.keys(c)}function getSumOfArray(c){var b=0;for(var a=0;a<c.length;a++){b+=parseInt(c[a])}return b}function getAverageValueOfArray(c){var b=0;for(var a=0;a<c.length;a++){b+=parseInt(c[a])}return Math.floor(b/c.length)}function getHTMLVariable(d){var a=location.search.substring(1).split("&");var b="";var c;for(c=0;c<a.length;c++){if(a[c].split("=")[0]===d){if(a[c].split("=").length>1){b=a[c].split("=")[1]}return b}}return""}function printJsonData(b,a){var c="json_list";if(isUndefined(document.getElementById(c))){return}document.getElementById(c).innerHTML='<p style="color:#FFF">CHANNEL • '+b+"</p><pre>"+syntaxHighlight(a)+"</pre>"}function syntaxHighlight(b){var a=(typeof(b)==="string")?b:JSON.stringify(b,undefined,2);a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return a.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(d){var c="number";if(/^"/.test(d)){if(/:$/.test(d)){c="key"}else{c="string"}}else{if(/true|false/.test(d)){c="boolean"}else{if(/null/.test(d)){c="null"}}}return'<span class="'+c+'">'+d+"</span>"})}var MAX_ATTEMPS=3;var attempts_connection=MAX_ATTEMPS;var max_effects;function curProperties(b){var a={results:50,timescale:1,type:"column",yaxismax:60,yaxismin:30};switch(b){case"t1":case"t2":case"t3":lastGraph=b;break;default:break}a.results=RESULTS[lastGraph];a.type=TYPE[graph_count];a.yaxismax=RES_MAX[graph_count];a.yaxismin=RES_MIN[graph_count];return a}function ConnectionCloudThingspeak(e,d,f){document.getElementById("graph_title").innerHTML=BULL;document.getElementById("min_max").innerHTML=STR.connection[lang];var b=["&results=50","&results=500",""];var a="https://thingspeak.com/channels/"+CHANNEL+"/charts/"+CHARTS[e]+"?bgcolor=%23000&color=%23903&dynamic=true&results="+RESULTS[lastGraph]+"&type="+d.type+(isDefined(d.yaxismax)?"&yaxismax="+d.yaxismax:"")+(isDefined(d.yaxismin)?"&yaxismin="+d.yaxismin:"");var c=document.getElementById(CLOUD_FRAME);window.setTimeout(function(){c.src=a;c.onload=function(){f.call()}},150)}function sendRequestForCloudFirst(){console.warn(" ====> sendRequestForCloudFirst");getServerSensorData("https://api.thingspeak.com/channels/"+CHANNEL+"/feeds.json",updateCloudData)}function sendRequestForCloud(){var a=$("#all_entries").hasClass("select")?entries:RESULTS[lastGraph];var b="?results="+a;getServerSensorData("https://api.thingspeak.com/channels/"+CHANNEL+"/feeds.json"+b,updateCloudData)}function sendRequestForCloudMapData(){var a="?results="+RESULTS[lastGraph];getServerSensorData("https://api.thingspeak.com/channels/"+CHANNEL+"/feeds.json"+a,updateMapData)}function updateMapData(a){var b=getCloudData(a);$("#map").empty();showMap()}function sendRequestForCloudMinMaxData(){var a=$("#all_entries").hasClass("select")?entries:RESULTS[lastGraph];getServerSensorData("https://api.thingspeak.com/channels/"+CHANNEL+"/fields/"+CHARTS[graph_count]+".json?results="+a,updateCalculatedData)}function updateCalculatedData(b){var c="";var a=KEY_GRAPH[graph_count];switch(a){case"app":c="1 &#8226; Android   |   2 &#8226;IOS   |   3 &#8226;Windows";break;case"maxUsedEffects":c=STR.max_use[lang]+max_effects+" "+SYM[graph_count];break;case"maxLeds":c=STR.max_use[lang]+document.getElementById("leds").innerHTML+" "+SYM[graph_count];break;default:break}document.getElementById("graph_title").innerHTML=TITLE[graph_count];document.getElementById("min_max").innerHTML=c;document.getElementById("entries").innerHTML=b.feeds.length+" "+STR.entries[lang];closeSpiner()}function updateCloudData(a){updateDisplay(CHANNEL,getCloudData(a))}function updateDisplay(b,a){updateDisplayData(b,a);$("#srvState").toggleClass("ready",true);attempts_connection=MAX_ATTEMPS;window.setTimeout(function(){$("#receiver").toggleClass("receive",false)},500)}function nextGraph(a){a.stopPropagation();var b=a.target.id;switch(b){case"t1":case"t2":case"t3":lastGraph=b;$("#all_entries").toggleClass("select",false);$("#spiner").show();$(".btn_timeline").toggleClass("select",false);$(a.target).toggleClass("select",true);$("#all_entries").html(getEntryButtonName());break;case"prev":clickVisualization(a);graph_count--;if(graph_count<0){graph_count=MAX_GRAPH-1}break;case"next":clickVisualization(a);graph_count++;if(graph_count>=MAX_GRAPH){graph_count=0}break;default:return}$("#icons").toggleClass("ie",(getBrowser()==="MSIE"));$("#icons").toggleClass("custom",(graph_count!==0));ConnectionCloudThingspeak(graph_count,curProperties(b),sendRequestForCloudMinMaxData)}function clickVisualization(a){$(a.target).toggleClass("select",true);$("#spiner").show();window.setTimeout(function(){$(a.target).toggleClass("select",false)},250)}function closeSpiner(){window.setTimeout(function(){$("#spiner").hide()},10)}function startAutoSendRequest(){intervalUpdateESP=setInterval(function(){$("#receiver").toggleClass("receive",true);sendRequestForCloud();attempts_connection--;if(attempts_connection===0){$("#srvState").toggleClass("ready",false);$("#statusLabel").html("connection error");attempts_connection=MAX_ATTEMPS}},60000)}function statsDataProto(a){this.time=a.created_at;this.app=a.field1;this.max_effects=a.field2;this.hard_loc=a.field3;this.used_lamps=a.field4;this.browser=a.field5;this.firmware=a.field6;this.max_leds=a.field7;this.ip=a.field8}function getCloudData(a){var b=getCalculatedData(a.feeds);entries=a.channel.last_entry_id;b.last_entry_id=entries;b.entries=a.feeds.length;return b}function getCalculatedData(e){var r=0;var t=[];var o=[];var f=[];var c=[];var s=[];var q=[];var d=[];var k=[];var y={MSIE:0,Firefox:0,Chrome:0,Safari:0,Other:0};var l={};var x={};var n;for(var u=0;u<e.length;u++){var j=new statsDataProto(e[u]);if(isPresent(j.ip)){if(isChipID(j.ip)){n=j.ip;if(isUndefined(x[n])){x[n]={hard_loc:"",app:0,visits:0,version:0,effects:0,browser:"n/a",leds:0,lamps:0,time:0,chip_id:n,ip:""}}x[n].hard_loc=j.hard_loc;x[n].app=parseInt(j.app);x[n].visits++;x[n].version=getVersion(j.firmware);var h=(j.hard_loc).split(",");x[n].ip=h[7];x[n].effects=parseInt(j.max_effects);if((j.browser==="MSIE")||(j.browser==="Firefox")||(j.browser==="Chrome")||(j.browser==="Safari")){x[n].browser=j.browser}else{x[n].browser="Other"}x[n].leds=parseInt(j.max_leds);x[n].lamps=parseInt(j.used_lamps);x[n].time=j.time;if(x[n].version===0){delete x[n]}else{f.push(x[n].version)}if(isDefined(j.max_effects)){o.push(parseInt(j.max_effects))}if(isDefined(j.max_leds)){c.push(parseInt(j.max_leds))}if(isDefined(j.used_lamps)){t.push(parseInt(j.used_lamps))}if(isDefined(j.browser)){if(isDefined(y[j.browser])){y[j.browser]++}else{y.Other++}}if(isDefined(j.app)){switch(j.app){case"1":preficks="a|";s.push(preficks+n);break;case"3":preficks="w|";q.push(preficks+n);break;default:if(j.browser==="Safari"||j.browser==="Gesco"){preficks="i|";d.push(preficks+n)}else{preficks="b|"+j.browser;k.push(preficks+n)}break}}var b=[];for(var v in y){b.push(y[v])}var p=Math.ceil(Math.max.apply(null,b)*1.1);b.length=0;r=Object.keys(x).length}}}var b=[];for(var v in y){b.push(y[v])}var p=Math.ceil(Math.max.apply(null,b)*1.1);b.length=0;r=Object.keys(x).length;var a=[];markers.length=0;if(r>0){for(var v in x){var g=x[v].version;if(isDefined(l[g])){l[g]++}else{l[g]=1}a.push(l[g]);if(isDefined(x[v].hard_loc)){var w=x[v].hard_loc.split(",");if(w.length>=6){var m={mobile:parseInt(w[0]),matrix:w[1]+"x"+w[2],city:w[3],country:isDefined(w[6])?w[6]:" ",lat:parseFloat(w[4]),lng:parseFloat(w[5]),version:x[v].version,os:x[v].app,lamps:x[v].lamps,effects:x[v].effects,browser:x[v].browser,visits:x[v].visits,time:x[v].time,chip_id:x[v].chip_id};markers.push(m)}}}max_effects=Math.max.apply(null,o);return{time:j.time,users:Object.keys(x).length,client:x,maxLeds:Math.max.apply(null,c),maxUsedEffects:max_effects,maxUsedLamps:Math.max.apply(null,t),verFirmware:uniqueKey(f),latestVersion:Math.max.apply(null,f),usedVer:JSON.sort(l),maxVerUsed:Math.max.apply(null,a),androidApp:uniqueKey(s).length,iosApp:uniqueKey(d).length,windowsApp:uniqueKey(q).length,Browsers:y,BrowsersMaxUsed:p}}else{return}}function numberOfVisits(a){var d=uniqueKey(a);var b={};for(var c=0;c<d.length;c++){b[d[c]]=0}for(var c=0;c<a.length;c++){b[a[c]]=b[a[c]]+1}return b}function isChipID(a){return(a.indexOf(".")<0&&a!=="undefined")}function getVersion(b){var a=b.substr(0,3);if(isNaN(parseFloat(a))){return 0}else{return a}}var BULL="&#8226;";var CHANNEL=178897;var MAX_GRAPH=3;var CLOUD_FRAME="web_graph";var RESULTS={t1:50,t2:500,t3:43200,mt1:100,mt2:1000,mt3:43200};var TIME_SCALE={t1:1,t2:20,t3:1440};var CHARTS=[1,2,7];var TYPE=["column","column","column"];var RES_MAX=[3.25,130,null];var RES_MIN=[0,75,0];var KEY_GRAPH=["app","maxUsedEffects","maxLeds"];var entries=50;var lastGraph="t1";var intervalUpdateESP;var graph_count=0;var CHART_BROWSER={Chrome:{},Firefox:{},MSIE:{},Safari:{},Other:{}};var STR={users:["уникальных пользователей","unique users"],latest_ver:["Последняя версия","Latest version"],num_leds:["количество светодиодов • max","number of LEDs • max"],os_android:["Платформа Android","android platform"],os_ios:["Платформа IOS","ios platform"],os_windows:["Платформа Windows","windows platform"],max_Lamps:["количество ламп в группе • max","Lamps in Group • max"],usage_browsers:["Использование браузеров","usage browsers"],connection:["подключение к веб-серверу","connection web server"],using_fw:["Использование версии прошивки","Using the firmware version"],entries:["записей","entries"],app_usage:["использование приложения","application usage statistics"],effects_usage:["использование эффектов","effects usage statistics"],matrix:["количество светодиодов","number of LEDs in the matrix • max"],max_use:["Максимальное использование ","Maximum use of "],effects:["еффектов","effects"],leds:["светодиодов","leds"],app:["Приложение","Application"],os:["Платформа","Platform"],browser:["Браузер","Browser"],connects:["Количество подключений","Number of connects"],matrix:["Размер матрицы","Matrix size"],fw:["Версия прошивки","Firmware version"],num_effects:["Количество эффектов","Number of effects"],lamps:["Ламп в группе","Lamps in group"]};var lang=0;var show_map=false;var TITLE=[];var SYM=[];var markers=[];window.onload=function(){lang=Number(getHTMLVariable("lang"))||EN;show_map=getHTMLVariable("map")==="1";if(MAP===1){show_map=true}TITLE=[STR.app_usage[lang],STR.effects_usage[lang],STR.matrix[lang]];SYM=["•",STR.effects[lang],STR.leds[lang]];showUI();window.setTimeout(function(){if(show_map){sendRequestForCloudMapData()}},200)};function showUI(){var a='<div id="win" class="content css-opacity">';a+='<div id="main_panel" class="panels shadow">';a+='<div class="panel_esp">';a+='<div class="cs_top_shadow"></div>';a+='<div class="title">WIFI LAMP REMOTE</div>';a+='<div class="title_location">application statistic</div>';a+='<div id="displays" class="cs_container"></div>';a+='<div iclass="cs_label cs_shadow"></div>';a+="</div>";a+='<div class="service_container">';a+='<div class="frame_service">';a+='<iframe id="web_graph" width="450" height="260"></iframe>';a+='<div id="icons" class="panel_icons"></div>';a+="</div>";a+='<div class="service_control">';a+='<div id="spiner" class="spiner"></div>';a+='<div id="graph_title" class="cs_graph_title"></div>';a+='<div id="min_max" class="cs_min_max"></div>';a+='<div class="line">';a+='<div id="entries" class="cs_entries"></div>';a+="</div>";a+='<div class="button_t_container" onClick="nextGraph(event);">';a+='<button id="t1" class="btn_timeline s_t1 select"></button>';a+='<button id="t2" class="btn_timeline s_t2"></button>';a+='<button id="t3" class="btn_timeline s_t3"></button>';a+="</div>";a+="</div>";a+='<div class="button_container" onClick="nextGraph(event);">';a+='<button id="prev" class="btn_round s_prev "></button>';a+='<button id="next" class="btn_round s_next"></button>';a+="</div>";a+="</div>";a+="</div>";a+='<div id="debug" class="panels shadow">';a+='<div id="ver" class="version"></div>';a+='<div id="json_list" class="cs_json">&#8226;</div>';a+='<button class="btn_back" value="back" onClick="clickControl(event);"></button>';a+="</div>";a+="</div >";a+='<div id="map_container" class="cs_map_container hide">';a+='<div id="map" class="cs_map"></div>';a+='<div id="user_info" onClick="clickMapControl(event);" class="user_info"></div>';a+="</div>";a+='<div id="map_ctrl" class="button_t_container" onClick="clickMapControl(event);">';a+='<button id="mt1" class="btn_timeline s_t1 select"></button>';a+='<button id="mt2" class="btn_timeline s_t2"></button>';a+='<button id="mt3" class="btn_timeline s_t3"></button>';a+="</div>";$("body").html(a);$("#ver").html("Version • "+VERSION);$("#debug").toggle(false);$("#map_container").toggleClass("hide",!show_map);$("#map_ctrl").toggleClass("hide",!show_map);$("#win").toggleClass("css-fade",true);createDisplays();ConnectionCloudThingspeak(graph_count,curProperties(lastGraph),sendRequestForCloudMinMaxData);$("#icons").toggleClass("ie",(getBrowser()==="MSIE"));window.setTimeout(function(){sendRequestForCloudFirst();startAutoSendRequest()},1000);$("body").bind("contextmenu",function(b){return false})}function clickControl(a){a.stopPropagation();var b=a.target.value;console.warn("clickControl | id:",b);switch(b){case"back":$("#main_panel").toggle(true);$("#debug").toggle(false);break;case"update":$("#debug").toggle(true);$("#main_panel").toggle(false);break;case"swap_chart":$(a.target).toggleClass("select");$(a.target).html(getSwapButtonName($(a.target).hasClass("select")));sendRequestForCloud();break;case"all_entries":$(a.target).toggleClass("select");$(a.target).html(getEntryButtonName());sendRequestForCloud();break;default:break}}function clickMapControl(a){var b=a.target.id;switch(b){case"mt1":case"mt2":case"mt3":lastGraph=b;$(".btn_timeline").toggleClass("select",false);$(a.target).toggleClass("select",true);sendRequestForCloudMapData();break;default:$("#user_info").empty();break}}function updateDisplayData(b,a){printJsonData(b,a);updateLedDisplay("users",parseInt(a.users));updateLedDisplay("android",parseInt(a.androidApp));updateLedDisplay("ios",parseInt(a.iosApp));updateLedDisplay("windows",parseInt(a.windowsApp));updateLedDisplay("fw",a.latestVersion.toFixed(1));updateLedDisplay("leds",a.maxLeds);updateLedDisplay("lamps",a.maxUsedLamps);updateChartDisplay(a);updateLedDisplay("statusLabel",getTimeFormatUTC(a.time))}function createDisplays(){var a='<div class="ds_box">'+createLedDisplay("users",STR.users[lang],"users","")+createLedDisplay("fw",STR.latest_ver[lang],"fw","")+createLedDisplay("android",STR.os_android[lang],"android","")+createLedDisplay("ios",STR.os_ios[lang],"ios","")+createLedDisplay("windows",STR.os_windows[lang],"windows","")+createLedDisplay("leds",STR.num_leds[lang],"leds","")+createLedDisplay("lamps",STR.max_Lamps[lang],"lamp","")+'<div class="ds title_chart"><div  id="title_chart" class="cs_label">'+STR.usage_browsers[lang]+"</div></div>"+createChartDisplay("chart","***","")+createTimeLedDisplay(STR.connection[lang])+"</div>";document.getElementById("displays").innerHTML=a;$("#srvState").toggleClass("ready",false)}function createLedDisplay(e,a,b,d){var c='<div class="ds '+b+'"><p>'+a+'</p><div id="'+e+'" class="val">'+d+"</div></div>";return c}function updateLedDisplay(b,a){obj=document.getElementById(b);if(isDefined(obj)){obj.innerHTML=a}}function createChartDisplay(d,a,c){var b='<div class="ds chart"><div class="cs_chart_box"><div id="chart_grid" class="cs_chart"></div><div id="'+d+'" class="cs_chart_container"></div></div><button id="swap_chart" class="cs_btn_swap" value="swap_chart" onClick="clickControl(event)">'+getSwapButtonName(false)+'</button><button id="all_entries" class="cs_btn_all_entries" value="all_entries" onClick="clickControl(event)">'+getEntryButtonName()+"</button></div>";return b}function getSwapButtonName(a){var b=a?STR.usage_browsers[lang]:STR.using_fw[lang];return"• "+b+" •"}function getEntryButtonName(){var a={t1:BULL,t2:(BULL+BULL),t3:(BULL+BULL+BULL)};var b=$("#all_entries").hasClass("select")?"all":a[lastGraph];return b}function updateChartDisplay(b){var k=8;var o=$("#swap_chart").hasClass("select")?Math.ceil(b.maxVerUsed*1.1):b.BrowsersMaxUsed;var n=$("#swap_chart").hasClass("select")?b.usedVer:b.Browsers;if($("#swap_chart").hasClass("select")){if((Object.keys(n).length)>k){var s=n;var d=Object.keys(n).length-k;n={};var f=0;for(var p in s){if(f>d){n[p]=s[p]}f++}}}var j=$("#swap_chart").hasClass("select")?n:CHART_BROWSER;var r=$("#swap_chart").hasClass("select")?" ver":"";$("#chart").empty();var c="";for(var p in j){c+='<div id="chart_'+p.replace(".","")+'" class="chart_bar_box'+r+'"><div class="chart_bar_icon"></div></div>'}$("#chart").html(c);for(var p in n){var g=$("#swap_chart").hasClass("select")?"img/icon/'ic_firmware.png":getIconName(p);var h=$("#swap_chart").hasClass("select")?n[p]:n[p];var q=Math.floor(Number(h)/o*100);var a=' style="background-image:url('+g+');"';var e=' style="height:'+q+'%"';var m="#chart_"+p.replace(".","");var l='<div class="cs_chart_bar"'+e+'></div><div class="chart_bar_icon"'+a+"></div>"+($("#swap_chart").hasClass("select")?'<div class="chart_bar_value ver">'+p+"</div>":"")+'<div class="chart_bar_value">'+n[p]+"</div>";$(m).html(l)}$("#title_chart").html(getSwapButtonName(!$("#swap_chart").hasClass("select")));createGridDisplay(o)}function createGridDisplay(d){var c="";for(var b=4;b>=0;b--){var a=getChartStringValue(b*Math.floor(d/4));c+='<div class="cs_item_grid"><div class="grid_label">'+a+'</div><div class="grid_label right">'+a+"</div></div>"}$("#chart_grid").html(c)}function getChartStringValue(a){if(a>1000000){a=parseFloat(a/1000000).toFixed(1)+"M"}else{if(a>1000){a=parseFloat(a/1000).toFixed(1)+"k"}}return a}function createTimeLedDisplay(b){var a='<div id = "receiver" class="ds time receive"><div id="statusLabel" class="cs_label chip">'+b+'</div><div id="srvState" class="led_srv_state select"></div><button class="cs_btn_restart" value="update" onClick="clickControl(event)">•</button></div>';return a}function getIconName(a){return"img/icon/"+a+".png"}function onClickMap(a){console.info("showMap");$(a.target).toggleClass("select");$("#map_container").toggleClass("hide",$(a.target).hasClass("select"));if($(a.target).hasClass("select")){showMap()}}function showInfo(e){var f=["","Android","IOS","Windows"];var b=["Desktop","Mobile"];var a='<div class="city">• '+e.city+" •</div>";var d=f[e.os].toLowerCase();if((e.browser!=="Safari")&&(e.mobile===0)&&(e.browser!=="Gecko")){d="windows"}var c=d;var h="other";if((e.browser==="MSIE")||(e.browser==="Firefox")||(e.browser==="Chrome")||(e.browserr==="Safari")){h=e.browser.toLowerCase()}var g=b[e.mobile].toLowerCase();a+='<div class="info_item '+c+'">'+STR.os[lang]+"<span>"+d+"</span></div>";a+='<div class="info_item '+g+'">'+STR.app[lang]+"<span>"+b[e.mobile]+"</span></div>";a+='<div class="info_item '+h+'">'+STR.browser[lang]+"<span>"+e.browser+"</span></div>";a+='<div class="info_item connects">'+STR.connects[lang]+"<span>"+e.visits+"</span></div>";a+='<div class="info_item time">• '+getTimeFormatUTC(e.time)+" •</div>";a+='<div class="info_item lamp_hard"></span></div>';a+='<div class="info_item fw">'+STR.fw[lang]+"<span>"+e.version+"</span></div>";a+='<div class="info_item eff">'+STR.num_effects[lang]+"<span>"+e.effects+"</span></div>";a+='<div class="info_item matrix">'+STR.matrix[lang]+"<span>"+e.matrix+"</span></div>";a+='<div class="info_item lamp">'+STR.lamps[lang]+"<span>"+e.lamps+"</span></div>";a+='<div class="info_item end"></div>';a+='<div class="country">'+e.country+"</div>";$("#user_info").html('<div class="info_box">'+a+"</div>")}function showMap(){var b=new google.maps.Map(document.getElementById("map"),{mapTypeId:google.maps.MapTypeId.TERRAIN,zoom:3,center:new google.maps.LatLng(49.9808,0),scrollwheel:false});var a=[];for(i=0;i<markers.length;++i){console.info(i,getTimeFormatUTC(markers[i].time),markers[i].country,markers[i].city," | ver:",markers[i].version);a[i]={position:new google.maps.LatLng(markers[i].lat+Math.random()/8,markers[i].lng+Math.random()/8),info:markers[i]}}a.forEach(function(d){var c=new google.maps.Marker({position:d.position,feature_data:d.info,animation:google.maps.Animation.DROP,map:b});google.maps.event.clearListeners(c,"click");c.addListener("click",function(){showInfo(this.feature_data)})})};