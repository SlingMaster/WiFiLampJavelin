/*! (c) Developer Alex Dovby 
LampRemoteUI Release It is Created 29.04.2024 -  9:22:41,69 */
;var VERSION="29.04.2024";
/*! iScroll v5.2.0-snapshot ~ (c) 2008-2017 Matteo Spinelli ~ http://cubiq.org/license */
(function(f,a,e){var h=f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||f.oRequestAnimationFrame||f.msRequestAnimationFrame||function(i){f.setTimeout(i,1000/60)};var c=(function(){var m={};var n=a.createElement("div").style;var k=(function(){var r=["t","webkitT","MozT","msT","OT"],p,q=0,o=r.length;for(;q<o;q++){p=r[q]+"ransform";if(p in n){return r[q].substr(0,r[q].length-1)}}return false})();function l(o){if(k===false){return false}if(k===""){return o}return k+o.charAt(0).toUpperCase()+o.substr(1)}m.getTime=Date.now||function i(){return new Date().getTime()};m.extend=function(q,p){for(var o in p){q[o]=p[o]}};m.addEvent=function(r,q,p,o){r.addEventListener(q,p,!!o)};m.removeEvent=function(r,q,p,o){r.removeEventListener(q,p,!!o)};m.prefixPointerEvent=function(o){return f.MSPointerEvent?"MSPointer"+o.charAt(7).toUpperCase()+o.substr(8):o};m.momentum=function(u,q,r,o,v,w){var p=u-q,s=e.abs(p)/r,x,t;w=w===undefined?0.0006:w;x=u+(s*s)/(2*w)*(p<0?-1:1);t=s/w;if(x<o){x=v?o-(v/2.5*(s/8)):o;p=e.abs(x-u);t=p/s}else{if(x>0){x=v?v/2.5*(s/8):0;p=e.abs(u)+x;t=p/s}}return{destination:e.round(x),duration:t}};var j=l("transform");m.extend(m,{hasTransform:j!==false,hasPerspective:l("perspective") in n,hasTouch:"ontouchstart" in f,hasPointer:!!(f.PointerEvent||f.MSPointerEvent),hasTransition:l("transition") in n});m.isBadAndroid=(function(){var o=f.navigator.appVersion;if(/Android/.test(o)&&!(/Chrome\/\d/.test(o))){var p=o.match(/Safari\/(\d+.\d)/);if(p&&typeof p==="object"&&p.length>=2){return parseFloat(p[1])<535.19}else{return true}}else{return false}})();m.extend(m.style={},{transform:j,transitionTimingFunction:l("transitionTimingFunction"),transitionDuration:l("transitionDuration"),transitionDelay:l("transitionDelay"),transformOrigin:l("transformOrigin"),touchAction:l("touchAction")});m.hasClass=function(p,q){var o=new RegExp("(^|\\s)"+q+"(\\s|$)");return o.test(p.className)};m.addClass=function(p,q){if(m.hasClass(p,q)){return}var o=p.className.split(" ");o.push(q);p.className=o.join(" ")};m.removeClass=function(p,q){if(!m.hasClass(p,q)){return}var o=new RegExp("(^|\\s)"+q+"(\\s|$)","g");p.className=p.className.replace(o," ")};m.offset=function(o){var q=-o.offsetLeft,p=-o.offsetTop;while(o=o.offsetParent){q-=o.offsetLeft;p-=o.offsetTop}return{left:q,top:p}};m.preventDefaultException=function(q,p){for(var o in p){if(p[o].test(q[o])){return true}}return false};m.extend(m.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});m.extend(m.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(o){return o*(2-o)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(o){return e.sqrt(1-(--o*o))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(p){var o=4;return(p=p-1)*p*((o+1)*p+o)+1}},bounce:{style:"",fn:function(o){if((o/=1)<(1/2.75)){return 7.5625*o*o}else{if(o<(2/2.75)){return 7.5625*(o-=(1.5/2.75))*o+0.75}else{if(o<(2.5/2.75)){return 7.5625*(o-=(2.25/2.75))*o+0.9375}else{return 7.5625*(o-=(2.625/2.75))*o+0.984375}}}}},elastic:{style:"",fn:function(o){var p=0.22,q=0.4;if(o===0){return 0}if(o==1){return 1}return(q*e.pow(2,-10*o)*e.sin((o-p/4)*(2*e.PI)/p)+1)}}});m.tap=function(q,o){var p=a.createEvent("Event");p.initEvent(o,true,true);p.pageX=q.pageX;p.pageY=q.pageY;q.target.dispatchEvent(p)};m.click=function(q){var p=q.target,o;if(!(/(SELECT|INPUT|TEXTAREA)/i).test(p.tagName)){o=a.createEvent(f.MouseEvent?"MouseEvents":"Event");o.initEvent("click",true,true);o.view=q.view||f;o.detail=1;o.screenX=p.screenX||0;o.screenY=p.screenY||0;o.clientX=p.clientX||0;o.clientY=p.clientY||0;o.ctrlKey=!!q.ctrlKey;o.altKey=!!q.altKey;o.shiftKey=!!q.shiftKey;o.metaKey=!!q.metaKey;o.button=0;o.relatedTarget=null;o._constructed=true;p.dispatchEvent(o)}};m.getTouchAction=function(o,q){var p="none";if(o==="vertical"){p="pan-y"}else{if(o==="horizontal"){p="pan-x"}}if(q&&p!="none"){p+=" pinch-zoom"}return p};m.getRect=function(o){if(o instanceof SVGElement){var p=o.getBoundingClientRect();return{top:p.top,left:p.left,width:p.width,height:p.height}}else{return{top:o.offsetTop,left:o.offsetLeft,width:o.offsetWidth,height:o.offsetHeight}}};return m})();function g(l,j){this.wrapper=typeof l=="string"?a.querySelector(l):l;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:0.334,disablePointer:TOUCH_DEVICE,disableTouch:!TOUCH_DEVICE,disableMouse:TOUCH_DEVICE,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true,bindToWrapper:typeof f.onmousedown==="undefined"};for(var k in j){this.options[k]=j[k]}this.translateZ=this.options.HWCompositing&&c.hasPerspective?" translateZ(0)":"";this.options.useTransition=c.hasTransition&&this.options.useTransition;this.options.useTransform=c.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?c.ease[this.options.bounceEasing]||c.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}if(!this.options.useTransition&&!this.options.useTransform){if(!(/relative|absolute/i).test(this.scrollerStyle.position)){this.scrollerStyle.position="relative"}}if(this.options.shrinkScrollbars=="scale"){this.options.useTransition=false}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;if(this.options.probeType==3){this.options.useTransition=false}this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}g.prototype={version:"5.2.0-snapshot",_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}},destroy:function(){this._initEvents(true);clearTimeout(this.resizeTimeout);this.resizeTimeout=null;this._execEvent("destroy")},_transitionEnd:function(i){if(i.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(k){if(c.eventType[k.type]!=1){var j;if(!k.which){j=(k.button<2)?0:((k.button==4)?1:2)}else{j=k.button}if(j!==0){return}}if(!this.enabled||(this.initiated&&c.eventType[k.type]!==this.initiated)){return}if(this.options.preventDefault&&!c.isBadAndroid&&!c.preventDefaultException(k.target,this.options.preventDefaultException)){k.preventDefault()}var i=k.touches?k.touches[0]:k,l;this.initiated=c.eventType[k.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this.startTime=c.getTime();if(this.options.useTransition&&this.isInTransition){this._transitionTime();this.isInTransition=false;l=this.getComputedPosition();this._translate(e.round(l.x),e.round(l.y));this._execEvent("scrollEnd")}else{if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=i.pageX;this.pointY=i.pageY;this._execEvent("beforeScrollStart")},_move:function(n){if(!this.enabled||c.eventType[n.type]!==this.initiated){return}var p=n.touches?n.touches[0]:n,k=p.pageX-this.pointX,j=p.pageY-this.pointY,o=c.getTime(),i,q,m,l;this.pointX=p.pageX;this.pointY=p.pageY;this.distX+=k;this.distY+=j;m=e.abs(this.distX);l=e.abs(this.distY);if(o-this.endTime>300&&(m<10&&l<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(m>l+this.options.directionLockThreshold){this.directionLocked="h"}else{if(l>=m+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){n.preventDefault()}else{if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}}j=0}else{if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){n.preventDefault()}else{if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}}k=0}}k=this.hasHorizontalScroll?k:0;j=this.hasVerticalScroll?j:0;i=this.x+k;q=this.y+j;if(i>0||i<this.maxScrollX){i=this.options.bounce?this.x+k/3:i>0?0:this.maxScrollX}if(q>0||q<this.maxScrollY){q=this.options.bounce?this.y+j/3:q>0?0:this.maxScrollY}this.directionX=k>0?-1:k<0?1:0;this.directionY=j>0?-1:j<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(i,q);if(o-this.startTime>300){this.startTime=o;this.startX=this.x;this.startY=this.y;if(this.options.probeType==1){this._execEvent("scroll")}}if(this.options.probeType>1){this._execEvent("scroll")}},_end:function(o){if(!this.enabled||c.eventType[o.type]!==this.initiated){return}if(this.options.preventDefault&&!c.preventDefaultException(o.target,this.options.preventDefaultException)){o.preventDefault()}var q=o.changedTouches?o.changedTouches[0]:o,k,j,n=c.getTime()-this.startTime,i=e.round(this.x),t=e.round(this.y),s=e.abs(i-this.startX),r=e.abs(t-this.startY),l=0,p="";this.isInTransition=0;this.initiated=0;this.endTime=c.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(i,t);if(!this.moved){if(this.options.tap){c.tap(o,this.options.tap)}if(this.options.click){c.click(o)}this._execEvent("scrollCancel");return}if(this._events.flick&&n<200&&s<100&&r<100){this._execEvent("flick");return}if(this.options.momentum&&n<300){k=this.hasHorizontalScroll?c.momentum(this.x,this.startX,n,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:i,duration:0};j=this.hasVerticalScroll?c.momentum(this.y,this.startY,n,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:t,duration:0};i=k.destination;t=j.destination;l=e.max(k.duration,j.duration);this.isInTransition=1}if(this.options.snap){var m=this._nearestSnap(i,t);this.currentPage=m;l=this.options.snapSpeed||e.max(e.max(e.min(e.abs(i-m.x),1000),e.min(e.abs(t-m.y),1000)),300);i=m.x;t=m.y;this.directionX=0;this.directionY=0;p=this.options.bounceEasing}if(i!=this.x||t!=this.y){if(i>0||i<this.maxScrollX||t>0||t<this.maxScrollY){p=c.ease.quadratic}this.scrollTo(i,t,l,p);return}this._execEvent("scrollEnd")},_resize:function(){var i=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){i.refresh()},this.options.resizePolling)},resetPosition:function(j){var i=this.x,k=this.y;j=j||0;if(!this.hasHorizontalScroll||this.x>0){i=0}else{if(this.x<this.maxScrollX){i=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){k=0}else{if(this.y<this.maxScrollY){k=this.maxScrollY}}if(i==this.x&&k==this.y){return false}this.scrollTo(i,k,j,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){c.getRect(this.wrapper);this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;var i=c.getRect(this.scroller);this.scrollerWidth=i.width;this.scrollerHeight=i.height;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;if(c.hasPointer&&!this.options.disablePointer){this.wrapper.style[c.style.touchAction]=c.getTouchAction(this.options.eventPassthrough,true);if(!this.wrapper.style[c.style.touchAction]){this.wrapper.style[c.style.touchAction]=c.getTouchAction(this.options.eventPassthrough,false)}}this.wrapperOffset=c.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(j,i){if(!this._events[j]){this._events[j]=[]}this._events[j].push(i)},off:function(k,j){if(!this._events[k]){return}var i=this._events[k].indexOf(j);if(i>-1){this._events[k].splice(i,1)}},_execEvent:function(m){if(!this._events[m]){return}var k=0,j=this._events[m].length;if(!j){return}for(;k<j;k++){this._events[m][k].apply(this,[].slice.call(arguments,1))}},scrollBy:function(i,l,j,k){i=this.x+i;l=this.y+l;j=j||0;this.scrollTo(i,l,j,k)},scrollTo:function(i,m,k,l){l=l||c.ease.circular;this.isInTransition=this.options.useTransition&&k>0;var j=this.options.useTransition&&l.style;if(!k||j){if(j){this._transitionTimingFunction(l.style);this._transitionTime(k)}this._translate(i,m)}else{this._animate(i,m,k,l.fn)}},scrollToElement:function(k,m,i,p,o){k=k.nodeType?k:this.scroller.querySelector(k);if(!k){return}var n=c.offset(k);n.left-=this.wrapperOffset.left;n.top-=this.wrapperOffset.top;var j=c.getRect(k);var l=c.getRect(this.wrapper);if(i===true){i=e.round(j.width/2-l.width/2)}if(p===true){p=e.round(j.height/2-l.height/2)}n.left-=i||0;n.top-=p||0;n.left=n.left>0?0:n.left<this.maxScrollX?this.maxScrollX:n.left;n.top=n.top>0?0:n.top<this.maxScrollY?this.maxScrollY:n.top;m=m===undefined||m===null||m==="auto"?e.max(e.abs(this.x-n.left),e.abs(this.y-n.top)):m;this.scrollTo(n.left,n.top,m,o)},_transitionTime:function(m){if(!this.options.useTransition){return}m=m||0;var j=c.style.transitionDuration;if(!j){return}this.scrollerStyle[j]=m+"ms";if(!m&&c.isBadAndroid){this.scrollerStyle[j]="0.0001ms";var k=this;h(function(){if(k.scrollerStyle[j]==="0.0001ms"){k.scrollerStyle[j]="0s"}})}if(this.indicators){for(var l=this.indicators.length;l--;){this.indicators[l].transitionTime(m)}}},_transitionTimingFunction:function(k){this.scrollerStyle[c.style.transitionTimingFunction]=k;if(this.indicators){for(var j=this.indicators.length;j--;){this.indicators[j].transitionTimingFunction(k)}}},_translate:function(j,l){if(this.options.useTransform){this.scrollerStyle[c.style.transform]="translate("+j+"px,"+l+"px)"+this.translateZ}else{j=e.round(j);l=e.round(l);this.scrollerStyle.left=j+"px";this.scrollerStyle.top=l+"px"}this.x=j;this.y=l;if(this.indicators){for(var k=this.indicators.length;k--;){this.indicators[k].updatePosition()}}},_initEvents:function(i){var j=i?c.removeEvent:c.addEvent,k=this.options.bindToWrapper?this.wrapper:f;j(f,"orientationchange",this);j(f,"resize",this);if(this.options.click){j(this.wrapper,"click",this,true)}if(!this.options.disableMouse){j(this.wrapper,"mousedown",this);j(k,"mousemove",this);j(k,"mousecancel",this);j(k,"mouseup",this)}if(c.hasPointer&&!this.options.disablePointer){j(this.wrapper,c.prefixPointerEvent("pointerdown"),this);j(k,c.prefixPointerEvent("pointermove"),this);j(k,c.prefixPointerEvent("pointercancel"),this);j(k,c.prefixPointerEvent("pointerup"),this)}if(c.hasTouch&&!this.options.disableTouch){j(this.wrapper,"touchstart",this);j(k,"touchmove",this);j(k,"touchcancel",this);j(k,"touchend",this)}j(this.scroller,"transitionend",this);j(this.scroller,"webkitTransitionEnd",this);j(this.scroller,"oTransitionEnd",this);j(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var j=f.getComputedStyle(this.scroller,null),i,k;if(this.options.useTransform){j=j[c.style.transform].split(")")[0].split(", ");i=+(j[12]||j[4]);k=+(j[13]||j[5])}else{i=+j.left.replace(/[^-\d.]/g,"");k=+j.top.replace(/[^-\d.]/g,"")}return{x:i,y:k}},_initIndicators:function(){var l=this.options.interactiveScrollbars,n=typeof this.options.scrollbars!="string",p=[],k;var o=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){k={el:d("v",l,this.options.scrollbars),interactive:l,defaultScrollbars:true,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(k.el);p.push(k)}if(this.options.scrollX){k={el:d("h",l,this.options.scrollbars),interactive:l,defaultScrollbars:true,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};this.wrapper.appendChild(k.el);p.push(k)}}if(this.options.indicators){p=p.concat(this.options.indicators)}for(var m=p.length;m--;){this.indicators.push(new b(this,p[m]))}function j(r){if(o.indicators){for(var q=o.indicators.length;q--;){r.call(o.indicators[q])}}}if(this.options.fadeScrollbars){this.on("scrollEnd",function(){j(function(){this.fade()})});this.on("scrollCancel",function(){j(function(){this.fade()})});this.on("scrollStart",function(){j(function(){this.fade(1)})});this.on("beforeScrollStart",function(){j(function(){this.fade(1,true)})})}this.on("refresh",function(){j(function(){this.refresh()})});this.on("destroy",function(){j(function(){this.destroy()});delete this.indicators})},_initWheel:function(){c.addEvent(this.wrapper,"wheel",this);c.addEvent(this.wrapper,"mousewheel",this);c.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){clearTimeout(this.wheelTimeout);this.wheelTimeout=null;c.removeEvent(this.wrapper,"wheel",this);c.removeEvent(this.wrapper,"mousewheel",this);c.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(m){if(!this.enabled){return}m.preventDefault();var k,j,n,l,i=this;if(this.wheelTimeout===undefined){i._execEvent("scrollStart")}clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){if(!i.options.snap){i._execEvent("scrollEnd")}i.wheelTimeout=undefined},400);if("deltaX" in m){if(m.deltaMode===1){k=-m.deltaX*this.options.mouseWheelSpeed;j=-m.deltaY*this.options.mouseWheelSpeed}else{k=-m.deltaX;j=-m.deltaY}}else{if("wheelDeltaX" in m){k=m.wheelDeltaX/120*this.options.mouseWheelSpeed;j=m.wheelDeltaY/120*this.options.mouseWheelSpeed}else{if("wheelDelta" in m){k=j=m.wheelDelta/120*this.options.mouseWheelSpeed}else{if("detail" in m){k=j=-m.detail/3*this.options.mouseWheelSpeed}else{return}}}}k*=this.options.invertWheelDirection;j*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){k=j;j=0}if(this.options.snap){n=this.currentPage.pageX;l=this.currentPage.pageY;if(k>0){n--}else{if(k<0){n++}}if(j>0){l--}else{if(j<0){l++}}this.goToPage(n,l);return}n=this.x+e.round(this.hasHorizontalScroll?k:0);l=this.y+e.round(this.hasVerticalScroll?j:0);this.directionX=k>0?-1:k<0?1:0;this.directionY=j>0?-1:j<0?1:0;if(n>0){n=0}else{if(n<this.maxScrollX){n=this.maxScrollX}}if(l>0){l=0}else{if(l<this.maxScrollY){l=this.maxScrollY}}this.scrollTo(n,l,0);if(this.options.probeType>1){this._execEvent("scroll")}},_initSnap:function(){this.currentPage={};if(typeof this.options.snap=="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var s=0,q,o=0,k,r,p,v=0,u,z=this.options.snapStepX||this.wrapperWidth,w=this.options.snapStepY||this.wrapperHeight,j,t;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){r=e.round(z/2);p=e.round(w/2);while(v>-this.scrollerWidth){this.pages[s]=[];q=0;u=0;while(u>-this.scrollerHeight){this.pages[s][q]={x:e.max(v,this.maxScrollX),y:e.max(u,this.maxScrollY),width:z,height:w,cx:v-r,cy:u-p};u-=w;q++}v-=z;s++}}else{j=this.options.snap;q=j.length;k=-1;for(;s<q;s++){t=c.getRect(j[s]);if(s===0||t.left<=c.getRect(j[s-1]).left){o=0;k++}if(!this.pages[o]){this.pages[o]=[]}v=e.max(-t.left,this.maxScrollX);u=e.max(-t.top,this.maxScrollY);r=v-e.round(t.width/2);p=u-e.round(t.height/2);this.pages[o][k]={x:v,y:u,width:t.width,height:t.height,cx:r,cy:p};if(v>this.maxScrollX){o++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=e.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=e.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var i=this.options.snapSpeed||e.max(e.max(e.min(e.abs(this.x-this.startX),1000),e.min(e.abs(this.y-this.startY),1000)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,i)})},_nearestSnap:function(k,p){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var o=0,n=this.pages.length,j=0;if(e.abs(k-this.absStartX)<this.snapThresholdX&&e.abs(p-this.absStartY)<this.snapThresholdY){return this.currentPage}if(k>0){k=0}else{if(k<this.maxScrollX){k=this.maxScrollX}}if(p>0){p=0}else{if(p<this.maxScrollY){p=this.maxScrollY}}for(;o<n;o++){if(k>=this.pages[o][0].cx){k=this.pages[o][0].x;break}}n=this.pages[o].length;for(;j<n;j++){if(p>=this.pages[0][j].cy){p=this.pages[0][j].y;break}}if(o==this.currentPage.pageX){o+=this.directionX;if(o<0){o=0}else{if(o>=this.pages.length){o=this.pages.length-1}}k=this.pages[o][0].x}if(j==this.currentPage.pageY){j+=this.directionY;if(j<0){j=0}else{if(j>=this.pages[0].length){j=this.pages[0].length-1}}p=this.pages[0][j].y}return{x:k,y:p,pageX:o,pageY:j}},goToPage:function(i,n,j,m){m=m||this.options.bounceEasing;if(i>=this.pages.length){i=this.pages.length-1}else{if(i<0){i=0}}if(n>=this.pages[i].length){n=this.pages[i].length-1}else{if(n<0){n=0}}var l=this.pages[i][n].x,k=this.pages[i][n].y;j=j===undefined?this.options.snapSpeed||e.max(e.max(e.min(e.abs(l-this.x),1000),e.min(e.abs(k-this.y),1000)),300):j;this.currentPage={x:l,y:k,pageX:i,pageY:n};this.scrollTo(l,k,j,m)},next:function(j,l){var i=this.currentPage.pageX,k=this.currentPage.pageY;i++;if(i>=this.pages.length&&this.hasVerticalScroll){i=0;k++}this.goToPage(i,k,j,l)},prev:function(j,l){var i=this.currentPage.pageX,k=this.currentPage.pageY;i--;if(i<0&&this.hasVerticalScroll){i=0;k--}this.goToPage(i,k,j,l)},_initKeys:function(l){var k={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var j;if(typeof this.options.keyBindings=="object"){for(j in this.options.keyBindings){if(typeof this.options.keyBindings[j]=="string"){this.options.keyBindings[j]=this.options.keyBindings[j].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(j in k){this.options.keyBindings[j]=this.options.keyBindings[j]||k[j]}c.addEvent(f,"keydown",this);this.on("destroy",function(){c.removeEvent(f,"keydown",this)})},_key:function(n){if(!this.enabled){return}var i=this.options.snap,o=i?this.currentPage.pageX:this.x,m=i?this.currentPage.pageY:this.y,k=c.getTime(),j=this.keyTime||0,l=0.25,p;if(this.options.useTransition&&this.isInTransition){p=this.getComputedPosition();this._translate(e.round(p.x),e.round(p.y));this.isInTransition=false}this.keyAcceleration=k-j<200?e.min(this.keyAcceleration+l,50):0;switch(n.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){o+=i?1:this.wrapperWidth}else{m+=i?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){o-=i?1:this.wrapperWidth}else{m-=i?1:this.wrapperHeight}break;case this.options.keyBindings.end:o=i?this.pages.length-1:this.maxScrollX;m=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0;m=0;break;case this.options.keyBindings.left:o+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:m+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:m-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i){this.goToPage(o,m);return}if(o>0){o=0;this.keyAcceleration=0}else{if(o<this.maxScrollX){o=this.maxScrollX;this.keyAcceleration=0}}if(m>0){m=0;this.keyAcceleration=0}else{if(m<this.maxScrollY){m=this.maxScrollY;this.keyAcceleration=0}}this.scrollTo(o,m,0);this.keyTime=k},_animate:function(r,q,l,i){var o=this,n=this.x,m=this.y,j=c.getTime(),p=j+l;function k(){var s=c.getTime(),u,t,v;if(s>=p){o.isAnimating=false;o._translate(r,q);if(!o.resetPosition(o.options.bounceTime)){o._execEvent("scrollEnd")}return}s=(s-j)/l;v=i(s);u=(r-n)*v+n;t=(q-m)*v+m;o._translate(u,t);if(o.isAnimating){h(k)}if(o.options.probeType==3){o._execEvent("scroll")}}this.isAnimating=true;k()},handleEvent:function(i){switch(i.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(i);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(i);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(i);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(i);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(i);break;case"keydown":this._key(i);break;case"click":if(this.enabled&&!i._constructed){i.preventDefault();i.stopPropagation()}break}}};function d(l,j,k){var m=a.createElement("div"),i=a.createElement("div");if(k===true){m.style.cssText="position:absolute;z-index:9999";i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"}i.className="iScrollIndicator";if(l=="h"){if(k===true){m.style.cssText+=";height:7px;left:2px;right:2px;bottom:0";i.style.height="100%"}m.className="iScrollHorizontalScrollbar"}else{if(k===true){m.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px";i.style.width="100%"}m.className="iScrollVerticalScrollbar"}m.style.cssText+=";overflow:hidden";if(!j){m.style.pointerEvents="none"}m.appendChild(i);return m}function b(j,m){this.wrapper=typeof m.el=="string"?a.querySelector(m.el):m.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=j;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var n in m){this.options[n]=m[n]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){c.addEvent(this.indicator,"touchstart",this);c.addEvent(f,"touchend",this)}if(!this.options.disablePointer){c.addEvent(this.indicator,c.prefixPointerEvent("pointerdown"),this);c.addEvent(f,c.prefixPointerEvent("pointerup"),this)}if(!this.options.disableMouse){c.addEvent(this.indicator,"mousedown",this);c.addEvent(f,"mouseup",this)}}if(this.options.fade){this.wrapperStyle[c.style.transform]=this.scroller.translateZ;var k=c.style.transitionDuration;if(!k){return}this.wrapperStyle[k]=c.isBadAndroid?"0.0001ms":"0ms";var l=this;if(c.isBadAndroid){h(function(){if(l.wrapperStyle[k]==="0.0001ms"){l.wrapperStyle[k]="0s"}})}this.wrapperStyle.opacity="0"}}b.prototype={handleEvent:function(i){switch(i.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(i);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(i);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(i);break}},destroy:function(){if(this.options.fadeScrollbars){clearTimeout(this.fadeTimeout);this.fadeTimeout=null}if(this.options.interactive){c.removeEvent(this.indicator,"touchstart",this);c.removeEvent(this.indicator,c.prefixPointerEvent("pointerdown"),this);c.removeEvent(this.indicator,"mousedown",this);c.removeEvent(f,"touchmove",this);c.removeEvent(f,c.prefixPointerEvent("pointermove"),this);c.removeEvent(f,"mousemove",this);c.removeEvent(f,"touchend",this);c.removeEvent(f,c.prefixPointerEvent("pointerup"),this);c.removeEvent(f,"mouseup",this)}if(this.options.defaultScrollbars&&this.wrapper.parentNode){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(j){var i=j.touches?j.touches[0]:j;j.preventDefault();j.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=i.pageX;this.lastPointY=i.pageY;this.startTime=c.getTime();if(!this.options.disableTouch){c.addEvent(f,"touchmove",this)}if(!this.options.disablePointer){c.addEvent(f,c.prefixPointerEvent("pointermove"),this)}if(!this.options.disableMouse){c.addEvent(f,"mousemove",this)}this.scroller._execEvent("beforeScrollStart")},_move:function(n){var j=n.touches?n.touches[0]:n,k,i,o,m,l=c.getTime();if(!this.moved){this.scroller._execEvent("scrollStart")}this.moved=true;k=j.pageX-this.lastPointX;this.lastPointX=j.pageX;i=j.pageY-this.lastPointY;this.lastPointY=j.pageY;o=this.x+k;m=this.y+i;this._pos(o,m);if(this.scroller.options.probeType==1&&l-this.startTime>300){this.startTime=l;this.scroller._execEvent("scroll")}else{if(this.scroller.options.probeType>1){this.scroller._execEvent("scroll")}}n.preventDefault();n.stopPropagation()},_end:function(k){if(!this.initiated){return}this.initiated=false;k.preventDefault();k.stopPropagation();c.removeEvent(f,"touchmove",this);c.removeEvent(f,c.prefixPointerEvent("pointermove"),this);c.removeEvent(f,"mousemove",this);if(this.scroller.options.snap){var i=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var j=this.options.snapSpeed||e.max(e.max(e.min(e.abs(this.scroller.x-i.x),1000),e.min(e.abs(this.scroller.y-i.y),1000)),300);if(this.scroller.x!=i.x||this.scroller.y!=i.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=i;this.scroller.scrollTo(i.x,i.y,j,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(k){k=k||0;var i=c.style.transitionDuration;if(!i){return}this.indicatorStyle[i]=k+"ms";if(!k&&c.isBadAndroid){this.indicatorStyle[i]="0.0001ms";var j=this;h(function(){if(j.indicatorStyle[i]==="0.0001ms"){j.indicatorStyle[i]="0s"}})}},transitionTimingFunction:function(i){this.indicatorStyle[c.style.transitionTimingFunction]=i},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else{if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){c.addClass(this.wrapper,"iScrollBothScrollbars");c.removeClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="8px"}else{this.wrapper.style.bottom="8px"}}}else{c.removeClass(this.wrapper,"iScrollBothScrollbars");c.addClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="2px"}else{this.wrapper.style.bottom="2px"}}}c.getRect(this.wrapper);if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=e.max(e.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;if(this.options.shrink=="clip"){this.minBoundaryX=-this.indicatorWidth+8;this.maxBoundaryX=this.wrapperWidth-8}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX}this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX))}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=e.max(e.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;if(this.options.shrink=="clip"){this.minBoundaryY=-this.indicatorHeight+8;this.maxBoundaryY=this.wrapperHeight-8}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY))}this.updatePosition()},updatePosition:function(){var i=this.options.listenX&&e.round(this.sizeRatioX*this.scroller.x)||0,j=this.options.listenY&&e.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(i<this.minBoundaryX){if(this.options.shrink=="scale"){this.width=e.max(this.indicatorWidth+i,8);this.indicatorStyle.width=this.width+"px"}i=this.minBoundaryX}else{if(i>this.maxBoundaryX){if(this.options.shrink=="scale"){this.width=e.max(this.indicatorWidth-(i-this.maxPosX),8);this.indicatorStyle.width=this.width+"px";i=this.maxPosX+this.indicatorWidth-this.width}else{i=this.maxBoundaryX}}else{if(this.options.shrink=="scale"&&this.width!=this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}}}if(j<this.minBoundaryY){if(this.options.shrink=="scale"){this.height=e.max(this.indicatorHeight+j*3,8);this.indicatorStyle.height=this.height+"px"}j=this.minBoundaryY}else{if(j>this.maxBoundaryY){if(this.options.shrink=="scale"){this.height=e.max(this.indicatorHeight-(j-this.maxPosY)*3,8);this.indicatorStyle.height=this.height+"px";j=this.maxPosY+this.indicatorHeight-this.height}else{j=this.maxBoundaryY}}else{if(this.options.shrink=="scale"&&this.height!=this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}}}this.x=i;this.y=j;if(this.scroller.options.useTransform){this.indicatorStyle[c.style.transform]="translate("+i+"px,"+j+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=i+"px";this.indicatorStyle.top=j+"px"}},_pos:function(i,j){if(i<0){i=0}else{if(i>this.maxPosX){i=this.maxPosX}}if(j<0){j=0}else{if(j>this.maxPosY){j=this.maxPosY}}i=this.options.listenX?e.round(i/this.sizeRatioX):this.scroller.x;j=this.options.listenY?e.round(j/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(i,j)},fade:function(l,k){if(k&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var j=l?250:500,i=l?0:300;l=l?"1":"0";this.wrapperStyle[c.style.transitionDuration]=j+"ms";this.fadeTimeout=setTimeout((function(m){this.wrapperStyle.opacity=m;this.visible=+m}).bind(this,l),i)}};g.utils=c;if(typeof module!="undefined"&&module.exports){module.exports=g}else{if(typeof define=="function"&&define.amd){define(function(){return g})}else{f.IScroll=g}}})(window,document,Math);var INTERFACE_NAME="NativeApplication";var REQUEST_JSON="request",RESPONSE_JSON="response";var APP_DIRECTORY=20;var EVT_UI=5000;var EVT_UI_RETURN=22;var EVT_MAIN_TEST=0;var EVT_READY=1;var CMD_INIT=1000;var CMD_CUSTOM_UI=3000;var EVT_CUR_IP=2000;var EVT_LAMPS_LIST=2001;var CMD_BACK=3;var EVT_TARGET_GEOPOSITION=5;var CMD_TARGET_COMPLETE=6;var CMD_UPDATE_GEOPOSITION=7;var CMD_AUTO_UPDATE_GEOPOSITION=8;var CMD_TARGET_GEOPOSITION=9;var EVT_NAVIGATION=10;var CMD_REDIRECT=32;var EVT_EXIT=35;var CMD_DEBUG=13;var EVT_EXO=777;var EVT_EXO_RESPONSE=888;function sendRequestToNativeApp(b,a){if(withAPP){window.setTimeout(function(){try{if(typeof a==="string"){window[INTERFACE_NAME].callNative(b,a)}else{window[INTERFACE_NAME].callNative(b,JSON.stringify(a))}}catch(c){}},10)}else{}}function isNativeApplication(){try{window[INTERFACE_NAME].callNative(EVT_MAIN_TEST,"{}");console.info("[+] isNativeApplication | Application Present");return true}catch(a){console.info("[-] isNativeApplication | Application not Present");return false}}var iScrollDelay=100;var scroll_ready=false;var scroll_stop=true;var myScroll;function createVerticaleWrapper(f,b,d){removeObject(f);var e='<div id="scroll_content" class="scroller max">'+b+"</div>";var c=CUSTOM_SCROLL?'<div id="'+f+'" class="wrapper">'+e+"</div>":'<div id="'+f+'" class="wrapper cs_scroll_y">'+b+"</div>";var a="#"+f;window.setTimeout(function(){if(CUSTOM_SCROLL){myScroll=new IScroll(a,{probeType:2,tap:true,mouseWheel:MOUSE_WHEEL});myScroll.on("scroll",startScrollEvents);myScroll.on("scrollEnd",endScrollEvents);document.getElementById(f).addEventListener("tap",d,false)}else{document.getElementById(f).addEventListener("click",d,false)}},500);return c}function startScrollEvents(){scroll_stop=false}function endScrollEvents(){window.setTimeout(function(){scroll_stop=true},10000)}function getBrowser(){var a=navigator.userAgent;if(a.search(/MSIE/)>0){return"MSIE"}if(a.search(/Firefox/)>0){return"Firefox"}if(a.search(/Opera/)>0){return"Opera"}if(a.search(/Chrome/)>0){return"Chrome"}if(a.search(/Safari/)>0){return"Safari"}if(a.search(/Konqueror/)>0){return"Konqueror"}if(a.search(/Iceweasel/)>0){return"Iceweasel"}if(a.search(/SeaMonkey/)>0){return"SeaMonkey"}if(a.search(/Gecko/)>0){return"Gecko"}return"N/A"}function isTouchDevice(){return !!("ontouchstart" in window)}function isDefined(a){return(a!==null&&a!==undefined)}function isUndefined(a){return(a===null||a===undefined)}function isPresent(a){return(a!==null&&a!==undefined&&a!=="")}function removeObject(a){var b=document.getElementById(a);if(b!==null){b.parentNode.removeChild(b)}}function isiOS(){return window.navigator.userAgent.match(/(iPhone|iPad|iPod)/)}function noCallback(a){}function uniqueKey(a){var c={};for(var b=0;b<a.length;b++){var d=a[b];c[d]=true}return Object.keys(c)}function isObj(b){var c=document.getElementById(b);var a=c?true:false;return a}function getTimeFormatUTC(d){var b=Date.parse(d);var e="en-US";var a={year:"numeric",month:"long",day:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"};var c=isNaN(b)?"&#8226;":new Date(b).toLocaleString(e,a);return c}function getServerSensorData(a,b){$.ajax({type:"GET",url:a,dataType:"json"}).done(function(c){if(c.status==="ZERO_RESULTS"){console.error("Error of performance | status : ZERO_RESULTS")}else{b(c)}}).error(function(){console.error("Error of performance")})}function getHTMLVariable(d){var a=location.search.substring(1).split("&");var b="";var c;for(c=0;c<a.length;c++){if(a[c].split("=")[0]===d){if(a[c].split("=").length>1){b=a[c].split("=")[1]}return b}}return""}function getVersion(a){return a.replace("-"," ").replace("-"," 20")}function outputJson(b,a){$("#json_list").html("<div>CMD • "+b+"</div><pre>"+syntaxHighlight(a)+"</pre>")}function syntaxHighlight(b){var a=(typeof(b)==="string")?b:JSON.stringify(b,undefined,2);a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return a.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(d){var c="number";if(/^"/.test(d)){if(/:$/.test(d)){c="key"}else{c="string"}}else{if(/true|false/.test(d)){c="boolean"}else{if(/null/.test(d)){c="null"}}}return'<span class="'+c+'">'+d+"</span>"})}function supportsHtml5Storage(){try{return"localStorage" in window&&window.localStorage!==null}catch(a){return false}}function resumeAppState(){if(getBrowser()===ACTIVE_X){curIP=getHTMLVariable("ip")||"192.168.1.1";var b=getHTMLVariable("lamps")||"[]";b=b.replace(/~/gi,",");b=b.replace(/%22/gi,'"');b=b.replace(/%20/gi," ");b=b.replace(/%7B/gi,"{");b=b.replace(/%7D/gi,"}");try{lampList=JSON.parse(b)}catch(a){console.error("JSON Error "+a)}return false}console.warn("resumeAppState");if(!supportsHtml5Storage()){if(getBrowser()!==ACTIVE_X){lampList=[]}curIP=getHTMLVariable("ip")||"192.168.1.1";console.warn("Not supports Local Storage");return false}else{if(localStorage.lamps!==null){console.info("Lamps • "+localStorage.lamps);try{lampList=JSON.parse(localStorage.lamps);curIP=localStorage.ip||"192.168.1.1"}catch(a){console.error("JSON Error "+a)}return true}}}function saveAppState(){if(getBrowser()===ACTIVE_X){delphiRequest(CMD_GROUP,curIP,JSON.stringify(lampList).replace(/,/gi,"~"));return false}if(!supportsHtml5Storage()){return false}localStorage.ip=curIP;if(lampList.length>1){localStorage.lamps=JSON.stringify(lampList)}return true}function addCrossdomainEventsListener(){if(typeof window.addEventListener!=="undefined"){window.addEventListener("message",onMessageEvent,false)}else{if(typeof window.attachEvent!=="undefined"){window.attachEvent("onmessage",onMessageEvent)}}}var onMessageEvent=function(f){f.stopPropagation();var a=f.data;if(isUndefined(a)){console.error("onMessageEvent Error Data");return}var d;try{if(typeof a==="string"){d=JSON.parse(a);var g=d.id;var b=d.json;updateUI(g,b)}}catch(c){showErrorPanel(c)}};function delphiRequest(b,c,a){if(app){window.location="#CMD:"+b+","+c+","+a}}function printJsonData(b,a){outputJson(b,a)}function sendCommandESP(f,b,e,g){var d;if(typeof g==="number"){d="&val="+g}else{d="&valStr="+g}var a="http://"+b+"/cmd?cmd="+e+d;var c=document.getElementById(f);c.src=a}function sendCommandFS(f,b,e,c){var a="http://"+b+"/cmd?cmd="+e+"&valStr=/"+c;var d=document.getElementById(f);d.src=a}function showWebUI(d,b){var a="http://"+b;var c=document.getElementById(d);c.src=a}function DownloadListEffects(e,b,c){var a="http://"+b+"/cmd?cmd="+CMD_LIST+"&valStr=effects"+c+".json";var d=document.getElementById(e);d.src=a}function sendRequestForService(a,b,c){getPcData(a+b,c)}function getPcData(a,b){$.get(a,function(c){console.info("PC Data:",c);b(c)})}var CONTENT_PATCH="img/",SYNC_INTERVAL=5000,SYNC_TIMEOUT=200,ACTIVE_X="MSIE",TEST_DURATION=100;var PTNX="путин ХУЙЛО";var CMD_SYNC=0,CMD_POWER=1,CMD_NEXT_EFF=2,CMD_PREV_EFF=3,CMD_BRIGHT_UP=4,CMD_BRIGHT_DW=5,CMD_SPEED=6,CMD_SCALE=7,CMD_AUTO=8,CMD_TEXT=9,CMD_INFO=10,CMD_WHITE=11,CMD_FAV=12,CMD_RESET=13,CMD_RESET_EFF=14,CMD_SHOW_EFF=15,CMD_DEFAULT=16,CMD_RANDOM=17,CMD_FAVORITES=18,CMD_GLOBAL_BRI=19,CMD_INTIM=20,CMD_OTA=21,CMD_IP=22,CMD_TEST_MATRIX=23,CMD_INIT_SERVO=25,CMD_SCAN=32,CMD_ECHO=33,CMD_GROUP_INIT=35,CMD_GROUP_DESTROY=36,CMD_FS_DIR=40,CMD_DEL_FILE=41,CMD_LIST_EFF=50,CMD_CONFIG=60,CMD_SAVE_CFG=61,CMD_SAVE_ALARMS=62,CMD_UPDATE_FS=65,CMD_CUSTOM_EFF=66,CMD_FW_INFO=69,CMD_CONNECT=77,CMD_LIST=55,CMD_DIAGNOSTIC=90,CMD_ACTIVATE=95,CMD_EFF_JAVELIN=99,CMD_GROUP=88;var IC_SCAN={icon:"an_lamp.png",icon_bg:"locator_grid.png",animation:"rotate",animation_img:"locator.png"};var IC_SETUP={icon:"lamp.png",icon_bg:"lamp_bg.png",animation:"blink",animation_img:"color_light.png"};var IC_JAVELIN={icon:"javelin.png",icon_bg:"locator_grid.png",animation:"rotate",animation_img:"locator.png"};var IC_RADAR={icon:"target.png",icon_bg:"locator_grid.png",animation:"rotate",animation_img:"locator.png"};var IC_REMOTE={icon:"remote.png",icon_bg:"remote_bg.png",animation:"rotate",animation_img:"locator.png"};var STR={cofig:["НАЛАШТУВАННЯ ЛАМПИ","SETUP LAMP"],net_scan:["Сканування","Network Scan"],auto_scan:["АВТО СКАНУВАННЯ","AUTO SCAN"],select_lamp:["Вибрати лампу","Select Lamp"],group_ctrl:["Управління Групою","Group Control"],effects:["Ефекти","Effects"],loading:["ЗАВАНТАЖЕННЯ","LOADING"],list_eff:["СПИСОК ЕФЕКТІВ","LIST EFFECTS"],speed:["Швидкість","Speed"],scale:["Масштаб","Scale"],fs:["ФАЙЛОВА СИСТЕМА","FILE SYSTEM"],fs_custom:["Завантаження файлів </br> на мобільні пристрої </br>не підтримується","Downloading files </br>on mobile devices </br>is not supported"],bright:["Яскравість","Brightness"],send:["НАДІСЛАТИ","SEND"],connect:["З'єднання","Connection"],warn:["• УВАГА •","• WARNING •"],back:["Н А З А Д","B A C K"],connect_ap:["З'єднання AP","CONNECT AP"],load_msg:["Помилка завантаження","Loading Error"],save_ok:["Налаштування Лампи Збережено","Lamp Settings Saved"],scan_msg:["Немає доступних ламп","No lamps available"],save_msg:["Зміни набудуть чинності лише після перезавантаження лампи","The changes will take effect only after the lamp is restarted"],glory:["СЛАВА УКРАÏНI","GLORY OF UKRAINE"],lamp:["Лампа","Lamp"],err_connect_msg:["На даний момент не доступна","is currently not available"],fire:["СМЕРТЬ ВОРОГАМ","FIRE"]};var ACIVATE_MSG={EN:"Lamp Activated.<br><span>Happy use.<br><br>Thanks to everyone who supports my country UKRAINE.</span>",UA:"Лампа активована.<br><span>Приємного використання.</span>",RU:"Вы граждане страны агресора, ваша страна и ваше бездействие принесли на мою Родину, в мой любимый город, в мой дом большое горе. Вам и вашей стране не место в цивилизованом мире пока вы не покаетесь.<br><br><span>На лампе будет воспроизводится только то что украинцы думают о вашем фюрере</span>",BY:"Белорусы, к вам отношение особое. Пока оно лояльное, но нас сильно беспокоит тот факт, что с вашей територии бомбят наши города. <br>Гоните мордор со своей земли пока они не начали вас защищать.<br><br><span>Лампа активирована.</span>",DEF:"Лампа активирована.<br><span>Приятного использования.<br><br>Спасибо всем кто поддерживает мою страну УКРАИНУ.</span>"};function createNavigator(a){var c=(IOT===3)||(IOT===11);var b='<div id="l_eff" class="label">• '+STR.bright[lang]+' •</div><div class="btn_box" onClick="clickControlESP(event)">'+(a?'<button id="btn_fs" class="button dev" style="pointer-events:auto; opacity:1;" value="fs">FS</button><button id="btn_set" class="button sym_set dev" value="setup"></button><button id="btn_info" class="button dev" style="pointer-events:auto; opacity:1;" value="info">INFO</button>':'<button id="btn_intim" class="button" value="intim">INTIM</button><button id="btn_cycle" class="button sym_cycle" value="cycle"></button><button id="btn_fav" class="button" value="fav">FAV</button>')+'</div><div class="btn_box" onClick="clickControlESP(event)">'+(a?(access_point?'<button id="btn_ap" class="button sym_ap" value="ap">AP</button>':'<button id="btn_custom" class="button '+(c?"sym_robot":"sym_filter")+'" value="filter"></button>'):'<button id="btn_text" class="button" value="txt">TXT</button>')+'<button id="btn_next" class="button sym_up" value="next"></button>'+(a?'<button id="btn_ota" class="button" value="ota">OTA</button>':'<button id="btn_led" class="button sym_led" value="led"></button>')+'</div><div class="btn_box" onClick="clickControlESP(event)"><button id="btn_b_dw" class="button sym_bdw" value="b_dw"></button><button id="btn_power" class="button sym_power" value="power"></button><button id="btn_b_up" class="button sym_bup" value="b_up"></button></div><div class="btn_box" onClick="clickControlESP(event)"><button id="btn_def" class="button" value="def">DEF</button><button id="btn_prev" class="button sym_dw" value="prev"></button><button id="btn_random" class="button" value="random">RND</button></div><div class="touch_container"><div class="label">• '+STR.speed[lang]+' •</div><div id="touch_speed" class="touch" onClick="clickControlTouch(event)"><div id="speed_min" class="flag"></div><div id="speed_max" class="flag max"></div><div id="ctrl_speed" class="marker"></div><div id="val_speed" class="label_val">255</div></div><div class="label">• '+STR.scale[lang]+' •</div><div id="touch_scale" class="touch hsl" onClick="clickControlTouch(event)"><div id="scale_min" class="flag"></div><div id="scale_max" class="flag max"></div><div id="ctrl_scale" class="marker"></div><div id="val_scale" class="label_val">• 255 •</div></div><button id="sp_dw" class="btn_dw top" onClick="clickFineTuning(event)"></button><button id="sp_up" class="btn_dw top ar" onClick="clickFineTuning(event)"></button><button id="sc_dw" class="btn_dw" onClick="clickFineTuning(event)"></button><button id="sc_up" class="btn_dw ar" onClick="clickFineTuning(event)"></button></div><div id="in_text" class="text_panel hide"><input type="text" id="txt" name="txt" class="text_input" placeholder="Input Text"><button id="btn_send" class="button sym_send" onClick="clickSend(event)">• '+STR.send[lang]+' •</button></div><button id="global_bri" class="global_bri" onClick="clickGlobalBri(event)"></button><div id="led" class="led"></div><div id="val_bright" class="label_bright"></div>';b+='<div id="toolbox" class="dev_container hide"></div></div>';$("#remote").html('<div id="navigator">'+b+"</div>");$("#btn_b_dw").on("mousedown touchstart",setBrightness);$("#btn_b_dw").on("mouseup touchend",doneSetBrightness);$("#btn_b_up").on("mousedown touchstart",setBrightness);$("#btn_b_up").on("mouseup touchend",doneSetBrightness)}function getDevPanel(a){a+='<div class="label fix_bottom">• '+STR.back[lang]+' •</div><button id="btn_back" class="btn_back" value="back" onClick="clickControlESP(event)"></button>';return a}function getNewParameters(){var a=(IP_LOC.country==="RU")?PTNX:$("#run_text").val();lamp_setup.ESP_mode=($("#ESP_mode").hasClass("select")?1:0);lamp_setup.SSDP=$("#SSDP").val().replace(/ /gi," ");lamp_setup.Summer_Time=($("#Summer_Time").hasClass("select")?1:0);lamp_setup.TimeOut=Number($("#TimeOut").val());lamp_setup.button_on=($("#button_on").hasClass("select")?1:0);lamp_setup.custom_eff=($("#custom_eff").hasClass("select")?1:0);lamp_setup.day_bright=Number($("#day_bright").val());lamp_setup.day_time=Number($("#day_time").val());lamp_setup.eff_auto=($("#eff_auto").hasClass("select")?1:0);lamp_setup.eff_interval=Number($("#eff_interval").val());lamp_setup.eff_rnd=($("#eff_rnd").hasClass("select")?1:0);lamp_setup.eff_valid=(IP_LOC.country==="RU")?2:1;lamp_setup.volume=Number($("#volume").val());lamp_setup.effect_always=($("#effect_always").hasClass("select")?1:0);lamp_setup.fav_effect=Number($("#fav_effect").val());lamp_setup.night_bright=Number($("#night_bright").val());lamp_setup.night_time=Number($("#night_time").val());lamp_setup.notifications=($("#notifications").hasClass("select")?1:0);lamp_setup.sound=($("#sound").hasClass("select")?1:0);lamp_setup.ntp=$("#ntp").val();lamp_setup.password=$("#password").val();lamp_setup.passwordAP=$("#passwordAP").val();lamp_setup.print_time=Number($("#print_time").val());lamp_setup.random_on=($("#random_on").hasClass("select")?1:0);lamp_setup.run_text=a.replace(/ /gi," ");lamp_setup.ssid=$("#ssid").val();lamp_setup.ssidAP=$("#ssidAP").val().replace(/ /gi," ");lamp_setup.time=$("#time").val();lamp_setup.time_always=($("#time_always").hasClass("select")?1:0);lamp_setup.timer5h=($("#timer5h").hasClass("select")?1:0);lamp_setup.timezone=Number($("#timezone").val());lamp_setup.workgroup=($("#grouplamps").hasClass("select")?1:0);return JSON.stringify(lamp_setup)}function getNewAlarms(){var d=Math.round(Number($("#delay").val())/5);if(d<1){d=1}if(d>9){d=9}var c={t:d,after:Number($("#after").val())};for(var b=1;b<8;b++){var a="a"+b;c[a]=($("#"+a).hasClass("select")?1:0);console.info("time:"+$("#time"+b).val());var e=$("#time"+b).val();c["h"+b]=Number(e.substr(0,2));c["m"+b]=Number(e.slice(-2))}return JSON.stringify(c)}function getSetupPanel(d,g){var f="";var c=String(d.SSDP).replace(/ /gi," ");var b=String(d.ssidAP).replace(/ /gi," ");var a=String(d.run_text).replace(/ /gi," ");var e="";console.info("Name",c);f+='<li id="set_title" class="title">'+((lang===1)?"General Settings":"Загальні налаштування")+"</li>";e=new itemProtoInput("SSDP",((lang===1)?"Device name":"Ім'я пристрою"),c,"text");f+=e.create();f+='<li class="sub_title">'+((lang===1)?"Connecting to Wi-Fi router":"Підключення до Wi-Fi роутера")+"</li>";e=new itemProtoCheck("ESP_mode",((lang===1)?"Use router connection":"Підключення через роутер"),d.ESP_mode);f+=e.create();e=new itemProtoInput("ssid",((lang===1)?"Network Name":"Назва мережі"),d.ssid,"text");f+=e.create();e=new itemProtoInput("password",((lang===1)?"Password":"Пароль"),d.password,"password");f+=e.create();e=new itemProtoInput("TimeOut",((lang===1)?"Connection timeout":"Тайм-аут з'єднання"),d.TimeOut,"text");f+=e.create();f+='<li class="sub_title">'+((lang===1)?"Time offset from GMT":"Зміщення часу від GMT")+"</li>";e=new itemProtoInput("timezone",((lang===1)?"Time Zone":"Часовий пояс"),d.timezone);f+=e.create();e=new itemProtoCheck("Summer_Time",((lang===1)?"Auto Daylight Saving Time":"Авто перехід на літній час"),d.ESP_mode);f+=e.create();e=new itemProtoInput("time",((lang===1)?"On device now":"На пристрої зараз"),d.time,"text");f+=e.create();e=new itemProtoInput("ntp",((lang===1)?"NTP server address":"Адреса сервера NTP"),d.ntp,"text");f+=e.create();f+='<li class="sub_title">'+((lang===1)?"Access point":"Точка доступу")+"</li>";e=new itemProtoInput("ssidAP",((lang===1)?"SSID Access point":"SSID Точки доступу"),b,"text");f+=e.create();e=new itemProtoInput("passwordAP",((lang===1)?"Password Access point":"Пароль Точки доступу"),d.passwordAP,"password");f+=e.create();f+='<li class="title">'+((lang===1)?"User Settings":"Налаштування користувача")+"</li>";e=new itemProtoCheck("random_on",((lang===1)?"Random mode":"Режим Random"),d.random_on);f+=e.create();e=new itemProtoCheck("notifications",((lang===1)?"Update Notifications":"Cповіщення про Oновлення"),d.notifications);f+=e.create();f+='<li class="sub_title">'+((lang===1)?"Robot IOT":"Робот IOT")+"</li>";e=new itemProtoCheck("sound",((lang===1)?"Sound Effects":"Звукові ефекти"),d.sound);f+=e.create();console.info("json.sound",d.sound,"json.volume",d.eff_volume);e=new itemProtoInput("volume",((lang===1)?"Volume Level 0-30":"Рівень гучності 0-30"),d.volume||8);f+=e.create();f+='<li class="sub_title">'+((lang===1)?"Hardware Button":"Апаратна Кнопка")+"</li>";e=new itemProtoCheck("button_on",((lang===1)?"Button Activated":"Кнопка Активована"),d.button_on);f+=e.create();e=new itemProtoCheck("time_always",((lang===1)?"Display the time on the off lamp":"Час на вимкненій лампі"),d.time_always);f+=e.create();e=new itemProtoInput("print_time",((lang===1)?"Output interval for time":"Інтервал виводу для часу"),d.print_time,"text");f+=e.create();e=new itemProtoInput("night_time",((lang===1)?"Transition to Night Time 0-23":"Перехід на нічний час 0-23"),d.night_time,"text");f+=e.create();e=new itemProtoInput("night_bright",((lang===1)?"Brightness at night 1-255":"Яскравість вночі 1-255"),d.night_bright,"text");f+=e.create();e=new itemProtoInput("day_time",((lang===1)?"Transition to daytime 0-23":"Перехід на денний час 0-23"),d.day_time,"text");f+=e.create();e=new itemProtoInput("day_bright",((lang===1)?"Daytime brightness 1-255":"Яскравість вдень 1-255"),d.day_bright,"text");f+=e.create();f+='<li class="sub_title">'+((lang===1)?"Energy Saving":"Збереження Eнергії")+"</li>";e=new itemProtoCheck("effect_always",((lang===1)?"Do not switch on after de-energizing":"Не включати після знеструмлення"),d.effect_always);f+=e.create();e=new itemProtoCheck("timer5h",((lang===1)?"Auto off timer":"Таймер автовимкнення"),d.timer5h);f+=e.create();f+='<li class="title">'+((lang===1)?"Effects Settings":"Налаштування ефектів")+"</li>";e=new itemProtoCheck("eff_auto",((lang===1)?"Auto change effects":"Авто зміна ефектів"),d.eff_auto||0);f+=e.create();e=new itemProtoInput("eff_interval",((lang===1)?"Effects change interval (sec)":"Інтервал зміни ефектів (сек)"),d.eff_interval||30);f+=e.create();e=new itemProtoInput("fav_effect",((lang===1)?"Favorite Effect":"Улюблений ефект"),d.fav_effect,"text");f+=e.create();f+='<li  class="btn_set" data-id="reset">'+((lang===1)?"DEFAULT SETTINGS":"НАЛАШТУВАННЯ ЗА ЗАМОВЧУВАННЯМ")+"</li>";f+='<li class="sub_title">'+((lang===1)?"OPTIONS FOR DEVELOPERS":"ОПЦІЇ ДЛЯ РОЗРОБНИКІВ")+"</li>";e=new itemProtoCheck("custom_eff",((lang===1)?"Custom Effects":"Спеціальні ефекти"),d.custom_eff);f+=e.create();f+='<li class="sub_title">'+((lang===1)?"Ticker":"Текст із прокруткою")+"</li>";e=new itemProtoInput("run_text",((lang===1)?"Scrolling Text":"Текст рядка із прокруткою"),a,"text");f+=e.create();f+='<li id="alarm_title" class="title">'+((lang===1)?"ALARM SETTINGS":"НАСТРОЙКИ БУДИЛА")+"</li>";if(isDefined(g)){f+='<li class="sub_title">'+((lang===1)?"ALARM «DAWN»":"БУДИЛО «СВІТАНОК»")+"</li>";e=new itemProtoInput("delay",((lang===1)?"Duration 5-60 min":"Тривалість 5-60 хв"),(Number(g.t)*5),"text");f+=e.create();e=new itemProtoInput("after",((lang===1)?"Glow after 1-60 min":"Тривалість після 1-60 хв"),Number(g.after),"text");f+=e.create();f+='<li class="sub_title">'+((lang===1)?"ASwitch-on time":"Час увімкнення")+"</li>";f+=createWeekAlarm(g)}else{f+='<li class="msg">'+STR.load_msg[lang]+"</li>"}f+='<li class="btn_set" data-id="save">'+((lang===1)?"SAVE SETTINGS":"ЗБЕРЕГТИ НАЛАШТУВАННЯ")+"</li>";f+='<li class="item desc_msg">* '+STR.save_msg[lang]+"</li>";return'<ul id="setup_panel">'+f+"</ul>"}function getMatrixConnect(a){var b=a[2]===0?"zigzag":"parallel";return b.toUpperCase()+' | <span class="ic_connect'+a[3]+'"></span> | <span class="ic_connect0 dir'+a[4]+'"></span> |'}function getInfoPC(b){var c='<li class="label">&nbsp;</li>';var a=new itemProto("cpu_load","ic_firmware.png","CPU LOAD",b.cpuLoad+"%",false);c+=a.create();a=new itemProto("cpu_t","ic_temp.png","CPU TEMPERATURE",b.cpuTemperature+"°C | "+b.cpuPercentT+"%",false);c+=a.create();a=new itemProto("mem_load","ic_heap.png","MEMORY LOAD",b.memoryLoad+"%",false);c+=a.create();return'<ul id="list">'+c+"</ul>"}function getInfo(b){var c='<li class="label">&nbsp;</li>';var a=new itemProto("ssid","ic_radar.png","SSID",b.ssid,false);c+=a.create();a=new itemProto("local_ip","ic_ip.png","LOCAL IP • CHIP ID",(b.ip+"   |    "+(isDefined(b.chip_id)?b.chip_id.toUpperCase():"    N/A   ")),false);c+=a.create();a=new itemProto("mac","ic_mac.png","MAC ADRESS",b.mac.toUpperCase(),false);c+=a.create();a=new itemProto("rssi","ic_level.png","LEVEL SIGNAL RSSI",b.rssi+" dBm",false);c+=a.create();a=new itemProto("matrix","ic_matrix.png",("MATRIX • "+b.matrix[0]+"x"+b.matrix[1]),getMatrixConnect(b.matrix),false);c+=a.create();a=new itemProto("heap","ic_heap.png","FREE HEAP",b.free_heap+" bytes",false);c+=a.create();a=new itemProto("ver","ic_firmware.png","FIRMWARE VERSION",b.ver+" effects",false);c+=a.create();return'<ul id="list">'+c+"</ul>"}function getEffectListItem(f){var e="";if(f.length>0){for(var c=0;c<f.length;c++){var d=f[c];var b=d.n;var a=new itemProto(c,"ic_eff.png",b.toUpperCase(),"• EFFECT • "+c,false);e+=a.create()}}else{e='<li class="item msg">'+STR.load_msg[lang]+"</li>"}return'<ul id="list">'+e+"</ul>"}function getFileListItem(d){var e="";if(d.length>0){for(var b=0;b<d.length;b++){var h=d[b];var g=(getExt(h.name)==="")?"ic_dir":"ic_"+getExt(h.name);var f=(g==="ic_dir")?"• DIRECTORY •":"Size • ";var j=(g!=="ic_dir")?(h.size+" bytes"):"";var a=(g==="ic_dir")?h.name.toUpperCase():h.name;var c=new itemProtoFS(h.name,g+".png",a,f+j,true);e+=c.create()}e+='<li class="item"><div class="item_name"><span class="desc">Total • '+d.length+" files</span></div></li>"}else{e='<li class="item_msg"><div>'+STR.load_msg[lang]+"</div></li>"}return'<ul id="list">'+e+"</ul>"}function clickGlobalBri(a){a.stopPropagation();$(a.target).toggleClass("select");sendCommandESP("web_srv",WEB_URL,CMD_GLOBAL_BRI,($(a.target).hasClass("select")?1:0))}function clickSend(a){$("#in_text").toggleClass("hide",true);a.stopPropagation();sendCommandESP("web_srv",WEB_URL,CMD_TEXT,$("#txt").val())}function clickFineTuning(a){a.stopPropagation();var b=Math.round(parseInt($("#ctrl_speed").css("left"),10)*1.2795);var c=Math.floor(parseInt($("#ctrl_scale").css("left"),10)*0.5);switch(a.target.id){case"sp_up":if(b<254){b+=2;sendCommandESP("web_srv",WEB_URL,CMD_SPEED,b)}break;case"sp_dw":if(b>1){b-=2;sendCommandESP("web_srv",WEB_URL,CMD_SPEED,b)}break;case"sc_up":if(c<100){c++;sendCommandESP("web_srv",WEB_URL,CMD_SCALE,c)}break;case"sc_dw":if(c>0){c--;sendCommandESP("web_srv",WEB_URL,CMD_SCALE,c)}break;default:return}}function getLampListItems(h,c){var g="";var b=new itemProto("scan","ic_radar.png",STR.auto_scan[lang],"",false);var a=b.create();if(h.length>0){for(var d=0;d<h.length;d++){var f=h[d];if(isDefined(f)){var e=(f.ip===c)?"ic_lamp_active.png":"ic_lamp.png";var b=new itemProto(f.ip,e,f.name,f.ip,false);g+=b.create()}}}else{g='<li class="item msg">'+STR.scan_msg[lang]+"</li>"}return'<ul id="lamp_list" onclick="lampListClick(event);">'+g+a+"</ul>"}function showWaitPanel(){var a='<li class="item_wait"></li>';a+='<li class="item_msg"><div class="item_msg">'+STR.loading[lang]+"</div></li>";$("#scroll_content").html("<ul>"+a+"</ul>")}function showErrorPanel(b){var a='<li class="item_err"></li>';a+='<li class="item_msg"><div class="item_msg">'+b+"</div></li>";$("#scroll_content").html('<ul id="error_msg">'+a+"</ul>")}function expandList(a){a.stopPropagation();if(a.target.id==="servo"){$(a.target.parentNode).toggleClass("select");sendCommandESP("web_srv",WEB_URL,CMD_INIT_SERVO,$(a.target.parentNode).hasClass("select")?1:0);return}if(access_point){return}if(lampList.length>0){$("#actual_content").html(getLampListItems(lampList,curIP))}$(".item").toggleClass("select",false);$(a.target).toggleClass("select");fadeList()}function fadeList(){$("#title").toggleClass("err",false);if($("#lamp_grp").hasClass("select")){$("#content_container").fadeOut(10,function(){})}else{window.setTimeout(function(){$("#content_container").fadeIn("slow",function(){myScroll.refresh()})},500)}}function connectLamp(){$("#led").toggleClass("ready",true);eff_package=1;effList.length=0;window.setTimeout(function(){DownloadListEffects("web_srv",WEB_URL,eff_package)},1000)}function lampListClick(a){a.stopPropagation();var b=$(a.target).attr("data-id");if(isDefined(b)){if(b==="scan"){clearInterval(intervalSync);scanWiFiLamp()}else{selectLamp(b);connectLamp()}}}function getExt(a){var b=a.split(".").pop();if(b===a){return""}return b}function selectLamp(a){res_count=1;$("#led").toggleClass("ready",true);$("#cur_lamp").html(STR.connect[lang]);$("#btn_fs").toggleClass("select",false);showWaitPanel();$(".group").toggleClass("select",false);fadeList();curIP=a;saveAppState();WEB_URL=curIP;sendCommandESP("web_srv",WEB_URL,CMD_CONNECT,0);window.setTimeout(function(){if(res_count>0){console.warn("ip:"+a+" | connect • "+res_count);delphiRequest(CMD_CONNECT,a,pass);sendRequestToNativeApp(EVT_CUR_IP,{lamp_ip:a})}else{console.error("ip:"+a+" | connect • "+res_count);showErrorPanel("WiFi "+STR.lamp[lang].toUpperCase()+"<br>IP • "+a+"<br>"+STR.err_connect_msg[lang])}},(scanTimeout*2))}function createWeekAlarm(d){var c="",b="";for(var a=1;a<8;a++){c=new itemProtoAlarm(a,d);b+=c.create()}return b}function itemProtoAlarm(c,e){var b=[["ПН","ВТ","СР","ЧТ","ПТ","СБ","ВС"],["MO","TU","WE","TH","FR","SA","SU"]];var a=Number(e["a"+c])===1?" select":"";var d=("0"+e["h"+c]).slice(-2)+":"+("0"+e["m"+c]).slice(-2);this.create=function(){var f='<li id="a'+c+'" class="check alarm'+a+'" data-id=a'+c+'><input type="time" id="time'+c+'" data-id=time'+c+' class="time_input" value='+d+'><div class="day_week '+((c>5)?"weekend":"")+'">'+b[lang][c-1]+"</div></li>";return f}}function itemProtoCheck(e,c,d){var a=" data-id="+e;var b=Number(d)===1?" select":"";this.create=function(){var f='<li id="'+e+'" class="check'+b+'" '+a+">"+c+"</li>";return f}}function itemProtoInput(e,c,d,b){var a=" data-id="+e;this.create=function(){var f='<li class="item_set"><div class="label_set">• '+c+' •</div><input type="'+b+'" id="'+e+'"'+a+' class="text_input" value='+d+"></li>";return f}}function itemProto(h,d,c,f,a){var g=isPresent(d)?' style="background-image:url('+CONTENT_PATCH+d+');"':"";var b=" data-id="+h;var e=a?"item_toggle":"item";this.create=function(){var i='<li id="item_'+h+'" class="'+e+'"'+b+'><div class="icon_container"><div class="icon_item"'+g+'></div></div><div class="item_name">'+c+'<span class="desc">'+f+"</span></div></li>";return i}}function itemProtoFS(h,d,c,f,a){var g=isPresent(d)?' style="background-image:url('+CONTENT_PATCH+d+');"':"";var b=" data-id="+h;var e=a?"item_toggle":"item";this.create=function(){var i='<li class="'+e+'"'+b+'><div class="icon_container"><div class="icon_item"'+g+'></div></div><div class="item_name">'+c+'<span class="desc">'+f+'</span></div><div class="btn_del"'+b+"></div></li>";return i}}function iconAnimateProto(d){if(isUndefined(d)){return""}var c=' style="background-image:url('+CONTENT_PATCH+d.icon_bg+');"';var b=" "+d.animation;var a=' style="background-image:url('+CONTENT_PATCH+d.animation_img+');"';var e=' style="background-image:url('+CONTENT_PATCH+d.icon+');"';this.create=function(){var f='<div class="ic_bg"'+c+'></div><div class="ic_animation'+b+'"'+a+'></div><div class="ic_img"'+e+"></div>";return f}}var CHANNEL=178897;var CLOUD_URL="https://api.thingspeak.com";var W_API_KEY="Z82OLP5KFBZ5PYLF";var R_API_KEY="5LGELEOE0S8LJ3S2";function sendStatisticsToCloud(b){var a="/update?key="+W_API_KEY+"&field1="+b.application+"&field2="+b.maxEff+"&field3="+b.hard_loc+"&field4="+b.group+"&field5="+b.browser+"&field6="+b.firmware+"&field7="+b.leds+"&field8="+b.chip_id;sendDataForCloud(a)}function sendDataForCloud(b){var a=CLOUD_URL+b;getServerSensorData(a,updateResponseCloudData)}function updateResponseCloudData(a){}function getServerSensorData(a,b){$.ajax({type:"GET",url:a,dataType:"json"}).done(function(c){b(c)}).error(function(){console.error("Error of performance")})}var TOUCH_DEVICE;var MOUSE_WHEEL=false;var CUSTOM_SCROLL=false;var custom_ui=false;var pc_countrol_url="http://192.168.79.1:8085/data.json";var res_count=5;var withAPP=false;var pass="***";var app=false;var access_point=false;var app_cycle=true;var intervalCount=0;var effInterval=0;var maxEff=0;var effList=[];var eff_package=0;var curEff=0;var curIP="";var WEB_URL="";var intervalUpdate;var intervalSync;var intervalScan;var intervalShow;var intervalDiagnostic;var test_count=0;var graph_count=1;var scanTimeout=200;var dev=true;var lang;var brightnessUp=false;var lampList=[];var cpu_maxT=80;var valTest=0;var pc_info=false;var pc_info_test=false;var application=2;var IP_LOC={};var sound=true;var audio;var IOT=0;var lamp_setup={};window.onload=function(){audio=new Audio();audio.preload="auto";CUSTOM_SCROLL=(isiOS()||getBrowser()==="Chrome"||getBrowser()==="Firefox"||getBrowser()==="MSIE"||getBrowser()==="Gecko");TOUCH_DEVICE=isTouchDevice();MOUSE_WHEEL=!TOUCH_DEVICE;if(isiOS()){document.addEventListener("touchmove",function(b){b.preventDefault()},false)}withAPP=isNativeApplication();if(withAPP){window.setTimeout(function(){sendRequestToNativeApp(EVT_READY,{browser:getBrowser(),ui:"project_remote"})},500)}else{resumeAppState();app=(Number(getHTMLVariable("app"))===1);access_point=(Number(getHTMLVariable("ap"))===1);app_cycle=getHTMLVariable("dev")==="1";pc_info=(Number(getHTMLVariable("pc_info"))===1);sound=getHTMLVariable("sound")==="1"||false;effInterval=Number(getHTMLVariable("interval"))||10;scanTimeout=Number(getHTMLVariable("timeout"))||200;lang=Number(getHTMLVariable("lang"))||0;dev=getHTMLVariable("dev")==="1"||false;if(app){application=3}if(lampList.length===0){curIP=getHTMLVariable("ip")||"192.168.1.1"}start()}addCrossdomainEventsListener();$(".panels").toggleClass("iphone",(getBrowser()==="Safari"));try{$.get("https://ipinfo.io",function(b){IP_LOC=b},"jsonp")}catch(a){console.error("Error Connection");IP_LOC.country="UA"}};function JavaScriptCallback(c,b){var a=b[RESPONSE_JSON];switch(c){case CMD_INIT:init(a);break;case CMD_CUSTOM_UI:custom_ui=!custom_ui;$(".service_container").toggleClass("hide",custom_ui);$(".iscroll_container").toggleClass("custom",custom_ui);myScroll.refresh();break;case CMD_BACK:break;default:console.info("[] JavaScriptCallback command "+c+" not present");break}}function init(a){lang=a.lang_en?1:0;dev=a.dev_mode||false;access_point=a.ap||false;sound=a.sound||true;curIP=a.lamp_ip||"192.168.1.1";effInterval=a.effInterval||10;scanTimeout=a.scan_timeout||300;try{lampList=JSON.parse(a.lamps||"[]")}catch(b){showErrorPanel(b)}app_cycle=true;app=false;application=1;sound=true;start()}function start(){WEB_URL=access_point?"192.168.4.1":curIP;showUI();window.setTimeout(function(){if((WEB_URL!=="192.168.1.1")&&(WEB_URL!=="192.168.0.1")){if(lampList.length===0){lampList=[{name:STR.connect[lang],ip:WEB_URL}]}window.setTimeout(function(){$(".group").toggleClass("select",false);sendCommandESP("web_srv",WEB_URL,CMD_CONNECT,0)},1000)}else{scanWiFiLamp()}createLampList()},100)}function Sync(){clearInterval(intervalSync);intervalSync=setInterval(function(){if($("#web_srv").hasClass("hide")){$("#led").toggleClass("ready",true);if(res_count>0){if(isObj("error_msg")){$("#lamp_grp").toggleClass("select",false);fadeList();showWaitPanel();connectLamp()}}else{fadeList();showErrorPanel("WiFi "+STR.lamp[lang].toUpperCase()+"<br>IP • "+WEB_URL+"<br>"+STR.err_connect_msg[lang])}res_count--;sendCommandESP("web_srv",WEB_URL,CMD_SYNC,0)}},SYNC_INTERVAL)}function showUI(){var c=document.getElementById("win");var b='<div class="label fix">•&nbsp; RST &nbsp; | &nbsp; DEVELOP MODE &nbsp;•</div><button id="check_dev" class="check_dev" onClick="clickShowDev(event)"></button><div class="rst" onClick="clickReset(event)"></div>';if(dev){$(".developer_box").html(b)}else{$(".developer_box").empty()}$(".developer_box").toggleClass("icon ",!dev);curEff;createNavigator($("#check_dev").hasClass("select"));if(c!==null){c.classList.add("css-fade")}var a={power:0};$("#web_srv").toggleClass("hide",true);$("#content_container").html(createVerticaleWrapper("list_wrapper","",itemListClick)+'<div id="title" class="list_title"></div><div id="progress_cycle" class="cycle_progress"></div>');updateUI(0,a)}function nextGroupEff(a){curEff+=a;if(curEff>=maxEff-2){curEff=0}if(curEff<0){curEff=maxEff-2}}function clickControlESP(a){a.stopPropagation();var d=a.target.value;var b=1;var c=0;if((IP_LOC.country==="RU")&&(d!=="power")){sendCommandESP("web_srv",WEB_URL,CMD_TEXT,PTNX);return}$("#led").toggleClass("ready",true);if(d!=="setup"){$("#web_srv").toggleClass("hide",true)}$("#btn_random").toggleClass("select",false);if(d!=="setup"){$("#btn_set").toggleClass("select",false)}switch(d){case"fs":case"setup":case"info":setStateDevButton(a);return;case"back":if($("#javelin_panel").css("display")==="block"){$("#javelin_panel").slideUp("slow",function(){sendCommandESP("web_srv",WEB_URL,CMD_EFF_JAVELIN,0);$("#l_eff").html("• DEVELOPER TOOLS •");$("#instruction").toggleClass("hide",true);window.setTimeout(function(){sendCommandESP("web_srv",WEB_URL,CMD_PREV_EFF,0)},1000)})}else{sendCommandESP("web_srv",WEB_URL,CMD_EFF_JAVELIN,0);window.setTimeout(function(){sendCommandESP("web_srv",WEB_URL,CMD_NEXT_EFF,0);setStateDevButton(a)},400)}return;case"ota":b=CMD_OTA;$("#grouplamps").toggleClass("select",false);if(app){showMsg("Copy password to Clipboard",true)}window.setTimeout(function(){sendCommandESP("web_srv",WEB_URL,b,0)},800);window.setTimeout(function(){showMsg(STR.list_eff[lang],false)},2000);delphiRequest(b,curIP,pass);break;case"filter":$(a.target).toggleClass("select");sendCommandESP("web_srv",WEB_URL,CMD_CUSTOM_EFF,$(a.target).hasClass("select")?1:0);return;case"prev":b=CMD_PREV_EFF;break;case"next":b=CMD_NEXT_EFF;break;case"intim":b=CMD_INTIM;break;case"cycle":$(a.target).toggleClass("select");$("#pprogress_cycle").css("width","100%");if(app_cycle){clearInterval(intervalShow);if($("#btn_cycle").hasClass("select")){b=CMD_PREV_EFF;intervalShow=setInterval(function(){if($("#web_srv").hasClass("hide")){if(effInterval!==0){$("#progress_cycle").css("width",(intervalCount/effInterval*100)+"%")}if(intervalCount>=effInterval){intervalCount=0;$("#led").toggleClass("ready",true);nextGroupEff(1);if(IP_LOC.country==="RU"){curEff=84;sendCommandESP("web_srv",WEB_URL,CMD_SHOW_EFF,curEff)}else{sendCommandESP("web_srv",WEB_URL,b,0)}}intervalCount++}},1000)}}else{sendCommandESP("web_srv",WEB_URL,CMD_AUTO,($("#btn_cycle").hasClass("select")?1:0))}return;case"fav":b=CMD_FAV;break;case"txt":$("#in_text").toggleClass("hide");$("#txt").unbind();$("#txt").bind("contextmenu",function(){$("#txt").val("");return false});return;case"led":b=CMD_WHITE;break;case"power":$("#btn_cycle").toggleClass("select",false);b=CMD_POWER;c=3;break;case"b_dw":case"b_up":doneSetBrightness();return;case"def":b=CMD_DEFAULT;break;case"random":b=CMD_RANDOM;$(a.target).toggleClass("select",true);break;default:return}sendCommandESP("web_srv",WEB_URL,b,c)}function restoreEffectList(){if(maxEff===effList.length){createEffectList(effList)}else{effList.length=0;eff_package=1;showMsg(STR.list_eff[lang],false);sendCommandESP("web_srv",WEB_URL,CMD_CONNECT,eff_package)}}function updateUI(f,b){if(isDefined(b)){if(access_point){b.ip="192.168.4.1"}$("#led").toggleClass("ready",false);switch(f){case CMD_CONNECT:showWaitPanel();pass=b.pass;syncState(b);var a=lang==1?"en_":"";if(eff_package===0){sendCommandESP("web_srv",b.ip,CMD_LIST,a+"effects1.json");eff_package=1}window.setTimeout(function(){Sync()},8000);return;case CMD_LIST:firstStart(b);return;case CMD_FS_DIR:if(isDefined(b.fs)){$("#scroll_content").html(getFileListItem(b.fs))}myScroll.refresh();return;case CMD_UPDATE_FS:sendCommandESP("web_srv",WEB_URL,CMD_FS_DIR,0);myScroll.refresh();return;case CMD_DEL_FILE:if(isDefined(b.status)){showMsg(b.status,true)}return;case CMD_SCAN:if(isDefined(b.name)){lampList.push({name:b.name,ip:b.ip});sendCommandESP("web_srv",b.ip,CMD_ECHO,0)}return;case CMD_INFO:createInfoPanel(b);sendCommandESP("web_srv",b.ip,CMD_ECHO,3);return;case CMD_FW_INFO:createStatistic(b);return;case CMD_ACTIVATE:window.setTimeout(function(){sendCommandESP("web_srv",WEB_URL,CMD_FW_INFO,0)},100);if(b.valid==2){sendCommandESP("web_srv",WEB_URL,CMD_TEXT,PTNX)}return;case CMD_SYNC:syncState(b);break;case CMD_BRIGHT_UP:case CMD_BRIGHT_DW:viewLedBrightness(b.bright);return;case CMD_CONFIG:createSetupPanel(b);return;case CMD_SAVE_CFG:if(b.cfg_save==="OK"){sendCommandESP("web_srv",WEB_URL,CMD_SAVE_ALARMS,getNewAlarms())}return;case CMD_SAVE_ALARMS:if(b.cfg_save==="OK"){showMsg(STR.save_ok[lang].toUpperCase(),false);window.setTimeout(function(){$("#btn_set").toggleClass("select",false);restoreEffectList()},3000)}return;case CMD_DIAGNOSTIC:var d=b.progress;if(isDefined(d)){$("#test_progress").css("width",Math.floor(d/10)*10+"%");if(d>=TEST_DURATION){$("#test").toggleClass("select",false);clearInterval(intervalDiagnostic);window.setTimeout(function(){sendCommandESP("web_srv",WEB_URL,CMD_EFF_JAVELIN,3)},100)}}return;default:break}if(scroll_stop){if(isDefined(b.list_idx)){var c="#item_"+b.list_idx;if(CUSTOM_SCROLL&&isDefined(c)){window.setTimeout(function(){if(isDefined(myScroll)){myScroll.scrollToElement(c,1500,null,null,IScroll.utils.ease.circular)}$(".item").toggleClass("current",false);$(c).toggleClass("current",true)},10)}}}viewLedBrightness(b.bright);var e=((b.speed||0)/255)*100;$("#ctrl_speed").css("left",e+"%");$("#val_speed").html("• "+(b.speed||"•")+" •");e=(b.scale||0);if(e>100){e=100}$("#ctrl_scale").css("left",e+"%");$("#val_scale").html((isDefined(b.scale)?Math.floor(b.scale*2.55)+" • "+b.scale+"%":"• • •"));if(!app_cycle){$("#btn_cycle").toggleClass("select",(b.eff_auto===1))}}}function clickOK(a){restoreEffectList();$("#dialog").toggleClass("hide");sendCommandESP("web_srv",WEB_URL,CMD_TEXT,STR.glory[lang])}function activateLamp(b){var c=(lang===1)?ACIVATE_MSG.EN:ACIVATE_MSG.DEF;var a='<ul></><li class="btn_set" onclick="clickOK(event)">'+STR.glory[lang]+"</li></ul>";if(IP_LOC.country==="RU"){c=ACIVATE_MSG[IP_LOC.country];sendCommandESP("web_srv",WEB_URL,CMD_ACTIVATE,2);$("#dialog").html('<div class="activate_msg">'+c+"</div>");$("#dialog").toggleClass("hide",false)}else{if((IP_LOC.country==="UA")||(IP_LOC.country==="BY")){c=ACIVATE_MSG[IP_LOC.country]}sendCommandESP("web_srv",WEB_URL,CMD_ACTIVATE,1);if(b.valid===0){$("#dialog").toggleClass("hide",false);$("#dialog").html('<div class="activate_msg">'+c+a+"</div>")}}}function firstStart(b){fadeList();if(access_point){b.ip="192.168.4.1"}if(b.status==="OK"){effList=effList.concat(b.list);if(maxEff===effList.length){eff_package=0;createEffectList(effList);window.setTimeout(function(){sendCommandESP("web_srv",WEB_URL,CMD_POWER,1);window.setTimeout(function(){activateLamp(b)},1000)},500)}else{eff_package++;if(eff_package<6){var a=lang==1?"en_":"";sendCommandESP("web_srv",b.ip,CMD_LIST,(a+"effects")+eff_package+".json")}}showMsg(STR.list_eff[lang],false)}else{showMsg(b.status,true)}}function viewLedBrightness(b){if(isDefined(b)){var a=Math.floor(b/255*100);$("#val_bright").html("• "+a+" •")}}function syncState(a){var c={};var b=0;curEff=a.list_idx||0;curEff=84;maxEff=Number(a.max_eff);if($("#grouplamps").hasClass("select")){$("#cur_lamp").html(STR.group_ctrl[lang])}else{$("#cur_lamp").html(a.name)}res_count=3;$("#btn_power").toggleClass("select",Number(a.power)===1);$("#global_bri").toggleClass("select",Number(a.gb)===1);$("#grouplamps").toggleClass("select",Number(a.workgroup)===1);if(isDefined(a.javelin)){IOT=Number(a.javelin);$("#grouplamps").toggleClass("javelin",IOT===1);$("#grouplamps").toggleClass("robot",IOT===3||IOT===11);$("#grouplamps").toggleClass("lighthouse",IOT===4);$("#btn_custom").toggleClass("sym_filter",IOT===1);$("#btn_custom").toggleClass("sym_robot",IOT===3||IOT===11);$("#servo_box").toggleClass("hide",IOT!==3&&IOT!==11);$("#servo_box").toggleClass("select",IOT===11)}$("#btn_custom").toggleClass("select",Number(a.custom_eff)===1);if(effList.length>0){c=effList[a.list_idx].v;$("#touch_scale").toggleClass("hsl",(c[4]>0));b=((c[0]||0)/255)*100;$("#speed_min").css("width",b+"%");b=((255-(c[1]||0))/255)*100;$("#speed_max").css("width",b+"%");b=(c[2]||0);$("#scale_min").css("width",b+"%");b=100-(c[3]||0);$("#scale_max").css("width",b+"%")}}function clickShowDev(a){$(a.target).toggleClass("select");createNavigator($("#check_dev").hasClass("select"));WEB_URL=$("#btn_ap").hasClass("select")?"192.168.4.1":curIP;sendCommandESP("web_srv",WEB_URL,CMD_FAVORITES,0)}function setBrightness(a){a.stopPropagation();if(!$("#web_srv").hasClass("hide")){return}var c=a.target.value;var b=0;switch(c){case"b_up":b=CMD_BRIGHT_UP;break;case"b_dw":b=CMD_BRIGHT_DW;break;default:return}intervalUpdate=setInterval(function(){$("#receiver").toggleClass("receive",true);clearInterval(intervalSync);sendCommandESP("web_srv",WEB_URL,b,1)},150)}function doneSetBrightness(){clearInterval(intervalUpdate);Sync()}function scanWiFiLamp(){var b=WEB_URL.split(".");var c;var a=2;clearInterval(intervalScan);lampList.length=0;$("#cur_lamp").html(STR.net_scan[lang]);$("#list").empty();createAnimateIcon(IC_SCAN);intervalScan=setInterval(function(){b[3]=a;c=b.join().replace(/,/gi,".");$("#progress").html("SCAN IP • "+c);sendCommandESP("web_srv",c,CMD_SCAN,0);a++;if(a>255){clearInterval(intervalScan);console.info("lamp List",JSON.stringify(lampList));if(withAPP){sendRequestToNativeApp(EVT_LAMPS_LIST,{lamps:JSON.stringify(lampList)})}else{saveAppState()}createLampList()}},scanTimeout*4)}function createEffectList(a){$("#btn_set").toggleClass("select",false);$("#scroll_content").html(getEffectListItem(a));fadeList();showMsg(STR.list_eff[lang],false)}function createInfoPanel(a){$("#scroll_content").html(getInfo(a));fadeList();showMsg("MORE INFO",false)}function createSetupPanel(a){console.info("CONFIG ",a.cfg);lamp_setup=a.cfg;console.info("CMD_CONFIG ",lamp_setup);$("#scroll_content").html(getSetupPanel(lamp_setup,a.alarms));fadeList();showMsg(STR.cofig[lang],false);myScroll.scrollToElement("#set_title",1500,null,null,IScroll.utils.ease.circular)}function createAnimateIcon(a){var b=new iconAnimateProto(a);var c='<div class="ic_container">'+b.create()+'</div><div id="progress" class="label">• • •</div>';window.setTimeout(function(){$("#actual_content").html(c)},200)}function getDevAnimateIcon(a){var b=new iconAnimateProto(a);var c='<div class="ic_container tools">'+b.create()+"</div>";return c}function createLampList(){if(lampList.length===1){curIP=lampList[0].ip;WEB_URL=curIP}var a='<div id="lamp_grp" class="group select"><div class="item_grp"><div class="item_container"><div id="servo_box" class="servo"><div id="servo" class="servo_btn"></div></div><div id="grouplamps" class="icon_grp" onClick="clickIdentification(event);"></div><div id="cur_lamp">'+(access_point?STR.connect_ap[lang]:STR.select_lamp[lang])+'</div></div><div id="actual_content">'+getLampListItems(lampList,curIP)+"</div></div>";$("#lamp_list").html(a);fadeList();showMsg(STR.list_eff[lang],false)}function clickControlTouch(b){b.stopPropagation();var e=b.target.id;var c=0;var a=b.offsetX===undefined?b.layerX:b.offsetX;var d=0;switch(e){case"touch_speed":c=CMD_SPEED;d=Math.round(a*1.28);break;case"touch_scale":c=CMD_SCALE;d=Math.round(a*0.5);break;default:return}sendCommandESP("web_srv",WEB_URL,c,d)}function getGroup(c,d){var a=[];for(var b=0;b<c.length;b++){if(d!==c[b].ip){a.push(c[b].ip)}}return a.toString()}function clickIdentification(a){a.stopPropagation();if(lampList.length>1){$(a.target).toggleClass("select");if($(a.target).hasClass("select")){activateWorkgroup("web_srv",WEB_URL,CMD_GROUP_INIT)}else{$("#cur_lamp").empty;activateWorkgroup("web_srv",WEB_URL,CMD_GROUP_DESTROY)}}else{sendCommandESP("web_srv",WEB_URL,CMD_IP,0);window.setTimeout(function(){activateWorkgroup("web_srv",WEB_URL,CMD_GROUP_DESTROY)},SYNC_TIMEOUT)}}function activateWorkgroup(e,b,d){var c=0;var a;intervalScan=setInterval(function(){var f=lampList[c].ip;if(b!==f){a=(d===CMD_GROUP_INIT)?getGroup(lampList,f):c;sendCommandESP(e,f,d,a)}c++;if(c>=lampList.length){clearInterval(intervalScan);window.setTimeout(function(){a=(d===CMD_GROUP_INIT)?getGroup(lampList,b):lampList.length;sendCommandESP(e,b,d,a)},SYNC_TIMEOUT)}},SYNC_TIMEOUT)}function clickReset(a){a.stopPropagation();$("#lamp_list").toggleClass("disabled",false);$("#btn_power").toggleClass("select",false);sendCommandESP("web_srv",WEB_URL,CMD_RESET,0)}function runEffect(a){$("#led").toggleClass("ready",true);if(isDefined(a)){curEff=a;sendCommandESP("web_srv",WEB_URL,CMD_SHOW_EFF,Number(curEff))}}function showJavelinRemote(a){a.stopPropagation();$("#javelin_panel").slideDown("slow",function(){$("#l_eff").html("• COMMAND LAUNCH UNIT •");sendCommandESP("web_srv",WEB_URL,CMD_EFF_JAVELIN,1);$("#instruction").toggleClass("hide",false)})}function clickJavelinRemote(a){a.stopPropagation();switch(a.target.id){case"instruction":window.open("https://irp.fas.org/doddir/army/fm3-22-37.pdf","_blank","toolbar = yes, top = 0, left = 0, width=1000");break;case"test":$("#test").toggleClass("select",!$("#test").hasClass("select"));$("#target_led").toggleClass("ready",!$("#target_led").hasClass("ready"));Diagnostic();break;case"fire":console.info("• FIRE •");sendCommandESP("web_srv",WEB_URL,CMD_EFF_JAVELIN,2);window.setTimeout(function(){if(sound){sendCommandESP("web_srv",WEB_URL,CMD_SYNC,0);audio.src="./sound/ptrk.mp3";audio.play()}},500);return;case"guard":$("#guard").toggleClass("select",!$("#guard").hasClass("select"));$("#radar").toggleClass("anime",$("#guard").hasClass("select"));$("#fire").toggleClass("disabled",!$("#guard").hasClass("select"));$("#fire").html(($("#guard").hasClass("select")?STR.fire[lang]:"HOLD"));$("#bearing").toggleClass("hide",!$("#guard").hasClass("select"));if($("#guard").hasClass("select")){if(sound){audio.src="./sound/sonar.mp3";audio.play()}}break;default:$("#javelin_panel").slideUp("slow",function(){sendCommandESP("web_srv",WEB_URL,CMD_EFF_JAVELIN,255);$("#l_eff").html("• DEVELOPER TOOLS •");$("#instruction").toggleClass("hide",true)});break}}function itemListClick(b){b.stopPropagation();if($(b.target).hasClass("item")){var c=$(b.target).attr("data-id");if(isNaN(c)){switch(c){case"cpu_load":case"cpu_t":case"mem_load":$(b.target).toggleClass("select");pc_info_test=!pc_info_test;break;case"matrix":if($("#javelin_panel").css("display")!=="block"){$(b.target).toggleClass("select");sendCommandESP("web_srv",WEB_URL,CMD_TEST_MATRIX,$(b.target).hasClass("select")?1:0)}break}}else{runEffect(c)}}if($(b.target).hasClass("check")){$(b.target).toggleClass("select")}if($(b.target).hasClass("btn_set")){var c=$(b.target).attr("data-id");if(c==="reset"){sendCommandESP("web_srv",WEB_URL,CMD_RESET_EFF,{})}if(c==="save"){var a=getNewParameters();sendCommandESP("web_srv",WEB_URL,CMD_SAVE_CFG,a);$("#toolbox").toggleClass("hide",true);$("#lamp_list").toggleClass("disabled",false)}}if($(b.target).hasClass("item_toggle")){$(".item_toggle").toggleClass("select",false);$(b.target).toggleClass("select")}if($(b.target).hasClass("btn_del")){var c=$(b.target).attr("data-id");$(".item_toggle").toggleClass("select",false);sendCommandFS("web_srv",WEB_URL,CMD_DEL_FILE,c)}}function showMsg(b,a){$("#title").html("• "+b+" •");$("#title").toggleClass("err",a)}function setStateDevButton(b){var a=(b.target.value==="back");$("#val_bright").toggleClass("hide",!a);$("#global_bri").toggleClass("hide",!a);if(a){$(".dev").toggleClass("select",false);$("#l_eff").html("• "+STR.bright[lang]+" •");$("#toolbox").toggleClass("hide",true);showWaitPanel();$("#toolbox").empty();restoreEffectList()}else{$("#l_eff").html("• DEVELOPER TOOLS •");$(b.target).toggleClass("select");$("#lamp_grp").toggleClass("select",false);var c="";if($("#btn_fs").hasClass("select")){sendCommandESP("web_srv",WEB_URL,CMD_FS_DIR,0);if(TOUCH_DEVICE){c=getDevAnimateIcon(IC_SETUP)+' <div class="label_ver">'+STR.warn[lang]+"<span>"+STR.fs_custom[lang]+"</span></div>"}else{c='<iframe id="web_fs" class="frame_fs"></iframe>'}showMsg(STR.fs[lang],false);$("#toolbox").html(getDevPanel(c));if(!TOUCH_DEVICE){showWebUI("web_fs",WEB_URL+"/fs")}}if($("#btn_set").hasClass("select")){$("#toolbox").html(getDevPanel(getDevAnimateIcon(IC_SETUP)));sendCommandESP("web_srv",WEB_URL,CMD_CONFIG,0)}if($("#btn_info").hasClass("select")){$("#toolbox").html(getDevPanel(getDevAnimateIcon(IC_JAVELIN)+'<div class="label_ver">• HTML UI Version •<span>'+getVersion(VERSION)+'</span></div><button id="btn_anime" onClick="showJavelinRemote(event)"></button><div id="javelin_panel" class="javelin_remote" onClick="clickJavelinRemote(event)"><div id="radar" class="javelin_radar">'+getDevAnimateIcon(IC_RADAR)+'<div id="bearing" class="ic_bearing surge hide"></div><div id="target_led" class="led_target"></div></div><div class="javelin_buttons"><div class="progress_box"><div id="test_progress"></div></div><button id="test" class="btn_javelin"></button><button id="fire" class="btn_javelin fire disabled">HOLD</button><button id="guard" class="btn_javelin"></button></div></div>'));showMsg(STR.fs[lang],false);sendCommandESP("web_srv",WEB_URL,CMD_INFO,0);$("#javelin_panel").slideUp(0)}}window.setTimeout(function(){$("#toolbox").toggleClass("hide",a);$("#lamp_list").toggleClass("disabled",!a);fadeList();$("#led_blick").toggleClass("on",!a)},500)}function updatePCData(a){if(isDefined(a)){if(a.pc_info==1){showMsg("INFO PC",false);$("#scroll_content").html(getInfoPC(a))}}$("#content_container").fadeIn("slow")}function sendPCData(){showMsg("INFO PC",false);$("#content_container").fadeIn("slow")}function testPCData(a){valTest+=2;if(valTest>100){valTest=0}a.pc_info=1;a.memoryLoad=valTest;a.cpuLoad=valTest;a.cpuTemperature=25;a.cpuPercentT=valTest;showMsg("TEST INFO PC",false);updatePCData(a)}function getDataPC(){var h={};var d={};var e=0;var f=0;var g={};var a=0;var c=$("#jsondata").val();var i={};if(pc_info_test){testPCData(i)}else{if(pc_info){if(c!==""){try{h=JSON.parse(c);d=h.Children[0]["Children"][1];g=h.Children[0]["Children"][2];if(isDefined(d)){e=parseInt(d.Children[1]["Children"][0].Value,10);f=parseInt(d.Children[2]["Children"][0].Value,10);i.cpuLoad=f||0;i.cpuTemperature=e||0;i.cpuPercentT=Math.round(e/cpu_maxT*100)}if(isDefined(g)){a=parseInt(g.Children[0]["Children"][0].Value,10);i.memoryLoad=a}i.pc_info=1}catch(b){showMsg("INFO PC",true);i={}}}}else{i={pc_info:0}}updatePCData(i)}return JSON.stringify(i)}function createStatistic(c){var d=c.ver.replace(/ /gi,"");var a=c.matrix;var b={hard_loc:String(TOUCH_DEVICE?1:0)+","+a[0]+","+a[1]+","+IP_LOC.city+","+IP_LOC.loc+","+IP_LOC.country+","+IP_LOC.ip,application:application,maxEff:maxEff,group:lampList.length,browser:getBrowser(),firmware:d,leds:a[0]*a[1],chip_id:c.chip_id.toUpperCase()};sendStatisticsToCloud(b)}function Diagnostic(){test_count=0;clearInterval(intervalDiagnostic);intervalDiagnostic=setInterval(function(){$("#target_led").toggleClass("ready",!$("#target_led").hasClass("ready"));sendCommandESP("web_srv",WEB_URL,CMD_DIAGNOSTIC,test_count);test_count++;if(!$("#test").hasClass("select")){clearInterval(intervalDiagnostic);$("#target_led").toggleClass("ready",false)}},1000)};