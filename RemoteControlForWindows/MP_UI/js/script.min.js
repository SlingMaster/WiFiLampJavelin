/*! (c) Developer Alex Dovby 
MP_UI2 Release It is Created 03.08.2023 - 15:42:46,06 */
;var VERSION="03.08.2023";function getBrowser(){var a=navigator.userAgent;if(a.search(/MSIE/)>0){return"MSIE"}if(a.search(/Firefox/)>0){return"Firefox"}if(a.search(/Opera/)>0){return"Opera"}if(a.search(/Chrome/)>0){return"Chrome"}if(a.search(/Safari/)>0){return"Safari"}if(a.search(/Konqueror/)>0){return"Konqueror"}if(a.search(/Iceweasel/)>0){return"Iceweasel"}if(a.search(/SeaMonkey/)>0){return"SeaMonkey"}if(a.search(/Gecko/)>0){return"Gecko"}return"N/A"}function isTouchDevice(){return !!("ontouchstart" in window)}function isDefined(a){return(a!==null&&a!==undefined)}function isUndefined(a){return(a===null||a===undefined)}function isPresent(a){return(a!==null&&a!==undefined&&a!=="")}function removeObject(a){var b=document.getElementById(a);if(b!==null){b.parentNode.removeChild(b)}}function isBitOn(b,a){return Boolean(b&(1<<a))}function isiOS(){return window.navigator.userAgent.match(/(iPhone|iPad|iPod)/)}function noCallback(a){}function uniqueKey(a){var c={};for(var b=0;b<a.length;b++){var d=a[b];c[d]=true}return Object.keys(c)}function getTimeFormatUTC(d){var b=Date.parse(d);var e="en-US";var a={year:"numeric",month:"long",day:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"};var c=isNaN(b)?"&#8226;":new Date(b).toLocaleString(e,a);return c}function getServerSensorData(a,b){$.ajax({type:"GET",url:a,dataType:"json"}).done(function(c){if(c.status==="ZERO_RESULTS"){console.error("Error of performance | status : ZERO_RESULTS")}else{b(c)}}).error(function(){console.error("Error of performance")})}function getHTMLVariable(d){var a=location.search.substring(1).split("&");var b="";var c;for(c=0;c<a.length;c++){if(a[c].split("=")[0]===d){if(a[c].split("=").length>1){b=a[c].split("=")[1]}return b}}return""}function getVersion(a){return a.replace("-"," ").replace("-"," 20")}function outputJson(b,a){$("#scroll_content").html("<pre>"+syntaxHighlight(a)+"</pre>")}function syntaxHighlight(b){var a=(typeof(b)==="string")?b:JSON.stringify(b,undefined,2);a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return a.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(d){var c="number";if(/^"/.test(d)){if(/:$/.test(d)){c="key"}else{c="string"}}else{if(/true|false/.test(d)){c="boolean"}else{if(/null/.test(d)){c="null"}}}return'<span class="'+c+'">'+d+"</span>"})}var CONST_BACK=-2,CONST_FORWARD=2,CONST_SEEK=2,CONST_STOP=0,CONST_PLAY=1,CONST_EJECT=7;var CMD_END=0;CMD_ECHO=69,CMD_INIT=99,CMD_PLAYER_MODE=100,CMD_VOLUME=101,CMD_VIS=102;CMD_SELECT_ALBUM=103;CMD_SEEK=104;CMD_NEXT_SONG=105;CMD_LN_VAL=106;var IP_LOC={};var progress=110;var cur_song=0;var next_volume=5;var max_song=5;var player_mode=0;var sendData={country:"UA",cmd:0,mode:0,song:0,max_song:0,volume:10,ln_val:false,vis:3};var curIP="";var next_play=false;window.onload=function(){showUI();sendData.cmd=CONST_STOP;setInterval(function(){controlMute()},75);try{$.get("https://ipinfo.io",function(b){IP_LOC=b;sendData.country=IP_LOC.country},"jsonp")}catch(a){console.error("Error Connection");IP_LOC.country="UA";sendData.country=IP_LOC.country}};function controlMute(){if($("#mute").hasClass("select")){if(sendData.volume>0){sendData.volume=sendData.volume-5;if(sendData.volume<0){sendData.volume=0}$("#volume").css("left",sendData.volume*3.8);sendData.cmd=CMD_VOLUME;delphiRequest()}}else{if(sendData.volume<next_volume){sendData.volume=sendData.volume+5;if(sendData.volume>next_volume){sendData.volume=next_volume}$("#volume").css("left",sendData.volume*3.8);sendData.cmd=CMD_VOLUME;delphiRequest()}if(sendData.volume>next_volume){sendData.volume=sendData.volume-5;if(sendData.volume<next_volume){sendData.volume=next_volume}$("#volume").css("left",sendData.volume*3.8);sendData.cmd=CMD_VOLUME;delphiRequest()}}$("#mute_ico").toggleClass("check",$("#mute").hasClass("select"));$("#vl").html(("0"+sendData.volume).slice(-2))}function updateData(c){var b=0;try{b=c.cmd;switch(b){case CMD_INIT:updateState(c);setDeckState();break;case CMD_VOLUME:next_volume=json.volume;break;case CMD_END:if(c.mode==CONST_PLAY){sendData.cmd=CMD_PLAYER_MODE;player_mode=CONST_STOP;sendData.mode=player_mode;setDeckState()}case CMD_SELECT_ALBUM:c.cmd=CMD_PLAYER_MODE;sendData.cmd=CMD_PLAYER_MODE;max_song=c.max_song;sendData.max_song=max_song;updateState(c);break;case CMD_ECHO:cur_song=c.song;setSongCountInfo();return;case CMD_NEXT_SONG:c.cmd=CMD_PLAYER_MODE;cur_song=c.song;sendData.song=song;updateState(c);break;default:updateState(c);setBtnState();return}}catch(a){debug('{"error":"'+a+'" }')}}function updateState(b){for(var a in b){if(a==="next_volume"){next_volume=b[a]}else{sendData[a]=b[a]}debug('{"'+a+'":"'+b[a]+'" }')}setBtnState()}function showUI(){var a='<div class="btn_vis_container" onclick="selectVis(event);"><div class="vis_title">• waveform •</div><button class="button btn_vis" value=1>Waveform</button><button class="button btn_vis" value=2>Waveform Spectrum</button><button class="button btn_vis select" value=3>Verical Gradient</button><button class="button btn_vis" value=4>Rings</button><button class="button btn_vis" value=5>Symmetrical Wave</button></div><div class="btn_vis_container" onclick="selectVis(event);"><div class="vis_title">• spectrum •</div><button class="button btn_vis" value=6>Spectrum Static</button><button class="button btn_vis" value=7>Spectrum Scroll</button><button class="button btn_vis" value=8>Spectrum Vertical</button><button class="button btn_vis" value=9>Musical Kaleidoscope</button><button class="button btn_vis" value=10>Radial Bars</button><button class="button btn_vis" value=17>Dragon Bbreath</button></div><div class="btn_vis_container" onclick="selectVis(event);"><div class="vis_title">• abstract •</div><button class="button btn_vis" value=11>Horny Peacock</button><button class="button btn_vis" value=12>Colored Blots</button><button class="button btn_vis" value=13>Magic Eye</button><button class="button btn_vis" value=14>Cheerful Fire</button><button class="button btn_vis" value=15>Tuning Indicator</button></div>';$("#vis_container").html(a)}function setBobbinSpeed(){$(".bobbin").toggleClass("bobbin",false);$(".bobbin_high_speed").toggleClass("bobbin_high_speed",false);if(progress<40){$("#bobbin_l").toggleClass("bobbin",true);$("#bobbin_r").toggleClass("bobbin_high_speed",true)}else{if(progress>60){$("#bobbin_l").toggleClass("bobbin_high_speed",true);$("#bobbin_r").toggleClass("bobbin",true)}else{$("#bobbin_l").toggleClass("bobbin",true);$("#bobbin_r").toggleClass("bobbin",true)}}}function setDeckState(){if((player_mode===CONST_STOP)||(player_mode===CONST_EJECT)){$("#deck_light").toggleClass("light_on",false);$("#bobbin_l").toggleClass("play_ani",false);$("#bobbin_r").toggleClass("play_ani",false);$("#bobbin_l").toggleClass("seek",false);$("#bobbin_r").toggleClass("seek",false);$("#bobbin_l").toggleClass("reverse_seek",false);$("#bobbin_r").toggleClass("reverse_seek",false)}else{$("#deck_light").toggleClass("light_on",true);$("#bobbin_l").toggleClass("play_ani",true);$("#bobbin_r").toggleClass("play_ani",true)}setSongCountInfo();console.info(cur_song,"of",max_song," | ",progress,"%");setBtnState();delphiRequest()}function setSongCountInfo(){if(max_song>0){$("#song").html(("0"+(cur_song+1)).slice(-2));$("#of_song").html(("0"+(cur_song+1)).slice(-2)+" • "+("0"+max_song).slice(-2));progress=cur_song/(max_song-1)*90;$("#progress").css("marginLeft",progress+"%")}else{$("#song").html("•");$("#of_song").html("00 • 00");$("#progress").css("marginLeft","110%")}setBobbinSpeed()}function setBtnState(){$("#stop").toggleClass("select",player_mode===0);$("#play").toggleClass("select",player_mode===1);$("#back").toggleClass("select",player_mode===-2);$("#forward").toggleClass("select",player_mode===2);$("#eject").toggleClass("select",player_mode===7);$("#ln").toggleClass("select",sendData.ln_val);$("#volume").css("left",sendData.volume*3.8);$("#ln_ico").toggleClass("check",$("#ln").hasClass("select"))}function deckSeek(a){if(player_mode===CONST_FORWARD){$("#deck_light").toggleClass("light_on",true);$("#bobbin_l").toggleClass("seek",true);$("#bobbin_r").toggleClass("seek",true)}else{if(player_mode===CONST_BACK){$("#deck_light").toggleClass("light_on",true);$("#bobbin_l").toggleClass("reverse_seek",true);$("#bobbin_r").toggleClass("reverse_seek",true)}}sendData.cmd=CMD_SEEK;sendData.mode=player_mode;setDeckState();window.setTimeout(function(){cur_song+=a;sendData.cmd=CMD_PLAYER_MODE;player_mode=CONST_STOP;sendData.mode=player_mode;sendData.song=cur_song;setDeckState();if(next_play){next_play=false;window.setTimeout(function(){player_mode=CONST_PLAY;sendData.cmd=CMD_PLAYER_MODE;sendData.mode=player_mode;$("#seek_play").toggleClass("select",false);setDeckState()},250)}},2000)}function clickButton(a){a.stopPropagation();var b=a.target.id;if(isPresent(b)){switch(b){case"back":if(cur_song>0){player_mode=CONST_BACK;sendData.mode=player_mode;deckSeek(-1)}else{return}break;case"stop":window.setTimeout(function(){sendData.cmd=CMD_PLAYER_MODE;player_mode=CONST_STOP;sendData.mode=player_mode;setDeckState()},250);break;case"play":player_mode=CONST_PLAY;sendData.cmd=CMD_PLAYER_MODE;sendData.mode=player_mode;break;case"seek_play":if(cur_song<max_song-1){$("#seek_play").toggleClass("select",true);player_mode=CONST_FORWARD;sendData.mode=player_mode;next_play=true;deckSeek(1)}else{return}break;case"forward":if(cur_song<max_song-1){player_mode=CONST_FORWARD;sendData.mode=player_mode;deckSeek(1)}else{return}break;case"eject":player_mode=CONST_EJECT;sendData.cmd=CMD_PLAYER_MODE;cur_song=0;sendData.song=cur_song;sendData.mode=player_mode;break;case"mute":$(a.target).toggleClass("select");if($("#mute").hasClass("select")){next_volume=sendData.volume}$("#volume_touch").toggleClass("no_events",$("#mute").hasClass("select"));break;case"ln":sendData.cmd=CMD_LN_VAL;$(a.target).toggleClass("select");sendData.ln_val=$("#ln").hasClass("select");$("#ln_ico").toggleClass("check",$("#ln").hasClass("select"));delphiRequest();break;case"rst":location.reload(true);break;default:return}setDeckState()}}function clickVolume(b){b.stopPropagation();var e=b.target.id;var c=0;var a=b.offsetX===undefined?b.layerX:b.offsetX;var d=0;d=Math.round(a/3.8);console.info("volume",d);next_volume=d}function selectVis(a){a.stopPropagation();$(".btn_vis").toggleClass("select",false);$(a.target).toggleClass("select");var b=a.target.value;if(isDefined(b)){sendData.cmd=CMD_VIS;sendData.vis=b;delphiRequest()}}function delphiRequest(){console.info("delphiRequest : ",sendData);window.location="#CMD:"+JSON.stringify(sendData)}function Sync(){}function debug(a){}function SetData(a){updateData(a);setSongCountInfo()};